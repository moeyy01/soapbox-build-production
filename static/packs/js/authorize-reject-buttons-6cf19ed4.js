import{r as u,_ as e,ab as I,H as _,di as k,K as p,G as N,a1 as b,aI as P}from"../index-961d4ed1.js";const E="/packs/assets/player-stop-filled-f2e06734.svg",T=s=>{let{onAuthorize:r,onReject:l,countdown:c}=s;const[t,o]=u.useState("pending"),n=u.useRef(),i=u.useRef(),[g,m]=u.useState(0),R=()=>{let a=1;i.current=setInterval(()=>{a++;const d=a*3.6;m(d),d>=360&&(clearInterval(i.current),m(0))},c/100)};function f(a,d,A){if(t===a)i.current&&clearInterval(i.current),n.current&&clearTimeout(n.current),o("pending");else{const v=async()=>{try{await A(),o(d)}catch(y){y&&console.error(y)}};typeof c=="number"?(o(a),n.current=setTimeout(v,c),R()):v()}}const x=async()=>f("authorizing","authorized",r),w=async()=>f("rejecting","rejected",l),h=a=>t==="authorizing"&&a==="authorizing"?{background:`conic-gradient(rgb(var(--color-primary-500)) ${g}deg, rgb(var(--color-primary-500) / 0.1) 0deg)`}:t==="rejecting"&&a==="rejecting"?{background:`conic-gradient(rgb(var(--color-danger-600)) ${g}deg, rgb(var(--color-danger-600) / 0.1) 0deg)`}:{};switch(u.useEffect(()=>()=>{n.current&&clearTimeout(n.current),i.current&&clearInterval(i.current)},[]),t){case"authorized":return e(j,{text:e(p,{id:"authorize.success",defaultMessage:"Approved"})});case"rejected":return e(j,{text:e(p,{id:"reject.success",defaultMessage:"Rejected"})});default:return e(_,{space:3,alignItems:"center"},void 0,e(z,{theme:"danger",icon:I,action:w,isLoading:t==="rejecting",disabled:t==="authorizing",style:h("rejecting")}),e(z,{theme:"primary",icon:k,action:x,isLoading:t==="authorizing",disabled:t==="rejecting",style:h("authorizing")}))}},j=s=>{let{text:r}=s;return e("div",{className:"rounded-full bg-gray-100 px-4 py-2 dark:bg-gray-800"},void 0,e(N,{theme:"muted",size:"sm"},void 0,r))},z=s=>{let{theme:r,icon:l,action:c,isLoading:t,style:o,disabled:n}=s;return e("div",{className:"relative"},void 0,e("div",{style:o,className:b({"flex h-11 w-11 items-center justify-center rounded-full":!0,"bg-danger-600/10":r==="danger","bg-primary-500/10":r==="primary"})},void 0,e(P,{src:t?E:l,onClick:c,theme:"seamless",className:"h-10 w-10 items-center justify-center bg-white focus:!ring-0 dark:!bg-gray-900",iconClassName:b("h-6 w-6",{"text-primary-500":r==="primary","text-danger-600":r==="danger"}),disabled:n})))};export{T as A};
