import{u as B,c as G,b9 as H,r as c,_ as e,bF as x,bG as o,K as t,bH as d,bJ as M,af as w,a2 as y,n as I,a8 as J,G as A,b_ as C,iv as T,iw as N,ix as K}from"../index-961d4ed1.js";const p=I({heading:{id:"column.app_create",defaultMessage:"Create app"},namePlaceholder:{id:"app_create.name_placeholder",defaultMessage:"e.g. 'Soapbox'"},scopesPlaceholder:{id:"app_create.scopes_placeholder",defaultMessage:"e.g. 'read write follow'"}}),S={client_name:"",redirect_uris:"urn:ietf:wg:oauth:2.0:oob",scopes:"",website:""},D=()=>{const l=B(),u=G(),{account:h}=H(),[m,g]=c.useState(null),[_,b]=c.useState(null),[k,n]=c.useState(!1),[s,f]=c.useState(S),P=()=>{const a=T(h);return u(N(s,a)).then(r=>(g(r),r))},R=a=>{const r=T(h),q={client_id:a.client_id,client_secret:a.client_secret,redirect_uri:s.redirect_uris,grant_type:"client_credentials",scope:s.scopes};return u(K(q,r)).then(b)},O=()=>{n(!0),P().then(R).then(()=>{v(),n(!1)}).catch(a=>{console.error(a),n(!1)})},L=(a,r)=>{f({...s,[a]:r})},i=a=>r=>{L(a,r.target.value)},F=()=>{g(null),b(null),n(!1),f(S)},E=()=>{F(),v()},v=()=>{window.scrollTo({top:0,behavior:"smooth"})},U=()=>e(y,{label:l.formatMessage(p.heading),backHref:"/developers"},void 0,e(x,{},void 0,e(J,{},void 0,e(A,{size:"lg",weight:"medium"},void 0,e(t,{id:"app_create.results.explanation_title",defaultMessage:"App created successfully"})),e(A,{theme:"muted"},void 0,e(t,{id:"app_create.results.explanation_text",defaultMessage:"You created a new app and token! Please copy the credentials somewhere; you will not see them again after navigating away from this page."}))),e(o,{labelText:e(t,{id:"app_create.results.app_label",defaultMessage:"App"})},void 0,e(C,{value:JSON.stringify(m,null,2),rows:10,readOnly:!0,isCodeEditor:!0})),e(o,{labelText:e(t,{id:"app_create.results.token_label",defaultMessage:"OAuth token"})},void 0,e(C,{value:JSON.stringify(_,null,2),rows:10,readOnly:!0,isCodeEditor:!0})),e(M,{},void 0,e(w,{theme:"primary",type:"button",onClick:E},void 0,e(t,{id:"app_create.restart",defaultMessage:"Create another"})))));return m&&_?U():e(y,{label:l.formatMessage(p.heading),backHref:"/developers"},void 0,e(x,{onSubmit:O},void 0,e(o,{labelText:e(t,{id:"app_create.name_label",defaultMessage:"App name"})},void 0,e(d,{type:"text",placeholder:l.formatMessage(p.namePlaceholder),onChange:i("client_name"),value:s.client_name,required:!0})),e(o,{labelText:e(t,{id:"app_create.website_label",defaultMessage:"Website"})},void 0,e(d,{type:"text",placeholder:"https://soapbox.pub",onChange:i("website"),value:s.website})),e(o,{labelText:e(t,{id:"app_create.redirect_uri_label",defaultMessage:"Redirect URIs"})},void 0,e(d,{type:"text",placeholder:"https://example.com",onChange:i("redirect_uris"),value:s.redirect_uris,required:!0})),e(o,{labelText:e(t,{id:"app_create.scopes_label",defaultMessage:"Scopes"})},void 0,e(d,{type:"text",placeholder:l.formatMessage(p.scopesPlaceholder),onChange:i("scopes"),value:s.scopes,required:!0})),e(M,{},void 0,e(w,{theme:"primary",type:"submit",disabled:k},void 0,e(t,{id:"app_create.submit",defaultMessage:"Create app"})))))};export{D as default};
