const it=Object.prototype.toString;function pt(e){switch(it.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return O(e,Error)}}function T(e,t){return it.call(e)===`[object ${t}]`}function re(e){return T(e,"ErrorEvent")}function se(e){return T(e,"DOMError")}function ie(e){return T(e,"DOMException")}function R(e){return T(e,"String")}function oe(e){return e===null||typeof e!="object"&&typeof e!="function"}function C(e){return T(e,"Object")}function gt(e){return typeof Event<"u"&&O(e,Event)}function mt(e){return typeof Element<"u"&&O(e,Element)}function yt(e){return T(e,"RegExp")}function ot(e){return!!(e&&e.then&&typeof e.then=="function")}function ae(e){return C(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function ce(e){return typeof e=="number"&&e!==e}function O(e,t){try{return e instanceof t}catch{return!1}}function w(e){return e&&e.Math==Math?e:void 0}const l=typeof globalThis=="object"&&w(globalThis)||typeof window=="object"&&w(window)||typeof self=="object"&&w(self)||typeof global=="object"&&w(global)||function(){return this}()||{};function x(){return l}function W(e,t,n){const r=n||l,s=r.__SENTRY__=r.__SENTRY__||{};return s[e]||(s[e]=t())}const I=x(),Et=80;function St(e,t={}){try{let n=e;const r=5,s=[];let i=0,o=0;const c=" > ",a=c.length;let u;const h=Array.isArray(t)?t:t.keyAttrs,_=!Array.isArray(t)&&t.maxStringLength||Et;for(;n&&i++<r&&(u=bt(n,h),!(u==="html"||i>1&&o+s.length*a+u.length>=_));)s.push(u),o+=u.length,n=n.parentNode;return s.reverse().join(c)}catch{return"<unknown>"}}function bt(e,t){const n=e,r=[];let s,i,o,c,a;if(!n||!n.tagName)return"";r.push(n.tagName.toLowerCase());const u=t&&t.length?t.filter(_=>n.getAttribute(_)).map(_=>[_,n.getAttribute(_)]):null;if(u&&u.length)u.forEach(_=>{r.push(`[${_[0]}="${_[1]}"]`)});else if(n.id&&r.push(`#${n.id}`),s=n.className,s&&R(s))for(i=s.split(/\s+/),a=0;a<i.length;a++)r.push(`.${i[a]}`);const h=["aria-label","type","name","title","alt"];for(a=0;a<h.length;a++)o=h[a],c=n.getAttribute(o),c&&r.push(`[${o}="${c}"]`);return r.join("")}function ue(){try{return I.document.location.href}catch{return""}}function fe(e){return I.document&&I.document.querySelector?I.document.querySelector(e):null}const Tt="Sentry Logger ",M=["debug","info","warn","error","log","assert","trace"];function at(e){if(!("console"in l))return e();const t=l.console,n={};M.forEach(r=>{const s=t[r]&&t[r].__sentry_original__;r in t&&s&&(n[r]=t[r],t[r]=s)});try{return e()}finally{Object.keys(n).forEach(r=>{t[r]=n[r]})}}function V(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1}};return typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?M.forEach(n=>{t[n]=(...r)=>{e&&at(()=>{l.console[n](`${Tt}[${n}]:`,...r)})}}):M.forEach(n=>{t[n]=()=>{}}),t}let E;typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?E=W("logger",V):E=V();function Q(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function he(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const s=e[r];try{n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function Ot(e,t,n=!1){return R(e)?yt(t)?t.test(e):R(t)?n?e===t:e.includes(t):!1:!1}function _e(e,t=[],n=!1){return t.some(r=>Ot(e,r,n))}function m(e,t,n){if(!(t in e))return;const r=e[t],s=n(r);if(typeof s=="function")try{Dt(s,r)}catch{}e[t]=s}function ct(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}function Dt(e,t){const n=t.prototype||{};e.prototype=t.prototype=n,ct(e,"__sentry_original__",t)}function de(e){return e.__sentry_original__}function le(e){return Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")}function Nt(e){if(pt(e))return{message:e.message,name:e.name,stack:e.stack,...Z(e)};if(gt(e)){const t={type:e.type,target:z(e.target),currentTarget:z(e.currentTarget),...Z(e)};return typeof CustomEvent<"u"&&O(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function z(e){try{return mt(e)?St(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function Z(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function pe(e,t=40){const n=Object.keys(Nt(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return Q(n[0],t);for(let r=n.length;r>0;r--){const s=n.slice(0,r).join(", ");if(!(s.length>t))return r===n.length?s:Q(s,t)}return""}function Rt(e){return Y(e,new Map)}function Y(e,t){if(C(e)){const n=t.get(e);if(n!==void 0)return n;const r={};t.set(e,r);for(const s of Object.keys(e))typeof e[s]<"u"&&(r[s]=Y(e[s],t));return r}if(Array.isArray(e)){const n=t.get(e);if(n!==void 0)return n;const r=[];return t.set(e,r),e.forEach(s=>{r.push(Y(s,t))}),r}return e}const kt=50,j=new Map;function wt(...e){const t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0)=>{const s=[];for(const i of t){let o=j.get(i);o||(o=new Map,j.set(i,o));const c=l._sentryDebugIds;c&&Object.keys(c).forEach(a=>{a.split(`
`).forEach(u=>{const h=i(u);h&&h.filename&&o.set(h.filename,c[a])})})}for(const i of n.split(`
`).slice(r)){if(i.length>1024)continue;const o=i.replace(/\(error: (.*)\)/,"$1");for(const c of t){const a=c(o);if(a){const u=j.get(c);if(u&&a.filename){const h=u.get(a.filename);h&&(a.debug_id=h)}s.push(a);break}}}return vt(s)}}function ge(e){return Array.isArray(e)?wt(...e):e}function vt(e){if(!e.length)return[];let t=e;const n=t[0].function||"",r=t[t.length-1].function||"";return(n.indexOf("captureMessage")!==-1||n.indexOf("captureException")!==-1)&&(t=t.slice(1)),r.indexOf("sentryWrapped")!==-1&&(t=t.slice(0,-1)),t.slice(0,kt).map(s=>({...s,filename:s.filename||t[0].filename,function:s.function||"?"})).reverse()}const H="<anonymous>";function Lt(e){try{return!e||typeof e!="function"?H:e.name||H}catch{return H}}const S=x();function Pt(){if(!("fetch"in S))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function tt(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function It(){if(!Pt())return!1;if(tt(S.fetch))return!0;let e=!1;const t=S.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=tt(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&E.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function Ut(){const e=S.chrome,t=e&&e.app&&e.app.runtime,n="history"in S&&!!S.history.pushState&&!!S.history.replaceState;return!t&&n}const f=x(),D={},et={};function Mt(e){if(!et[e])switch(et[e]=!0,e){case"console":xt();break;case"dom":qt();break;case"xhr":Ht();break;case"fetch":At();break;case"history":Gt();break;case"error":Ct();break;case"unhandledrejection":Wt();break;default:(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&E.warn("unknown instrumentation type:",e);return}}function me(e,t){D[e]=D[e]||[],D[e].push(t),Mt(e)}function p(e,t){if(!(!e||!D[e]))for(const n of D[e]||[])try{n(t)}catch(r){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&E.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Lt(n)}
Error:`,r)}}function xt(){"console"in f&&M.forEach(function(e){e in f.console&&m(f.console,e,function(t){return function(...n){p("console",{args:n,level:e}),t&&t.apply(f.console,n)}})})}function At(){It()&&m(f,"fetch",function(e){return function(...t){const n={args:t,fetchData:{method:Bt(t),url:jt(t)},startTimestamp:Date.now()};return p("fetch",{...n}),e.apply(f,t).then(r=>(p("fetch",{...n,endTimestamp:Date.now(),response:r}),r),r=>{throw p("fetch",{...n,endTimestamp:Date.now(),error:r}),r})}})}function Bt(e=[]){return"Request"in f&&O(e[0],Request)&&e[0].method?String(e[0].method).toUpperCase():e[1]&&e[1].method?String(e[1].method).toUpperCase():"GET"}function jt(e=[]){return typeof e[0]=="string"?e[0]:"Request"in f&&O(e[0],Request)?e[0].url:String(e[0])}function Ht(){if(!("XMLHttpRequest"in f))return;const e=XMLHttpRequest.prototype;m(e,"open",function(t){return function(...n){const r=this,s=n[1],i=r.__sentry_xhr__={method:R(n[0])?n[0].toUpperCase():n[0],url:n[1]};R(s)&&i.method==="POST"&&s.match(/sentry_key/)&&(r.__sentry_own_request__=!0);const o=function(){if(r.readyState===4){try{i.status_code=r.status}catch{}p("xhr",{args:n,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:r})}};return"onreadystatechange"in r&&typeof r.onreadystatechange=="function"?m(r,"onreadystatechange",function(c){return function(...a){return o(),c.apply(r,a)}}):r.addEventListener("readystatechange",o),t.apply(r,n)}}),m(e,"send",function(t){return function(...n){return this.__sentry_xhr__&&n[0]!==void 0&&(this.__sentry_xhr__.body=n[0]),p("xhr",{args:n,startTimestamp:Date.now(),xhr:this}),t.apply(this,n)}})}let v;function Gt(){if(!Ut())return;const e=f.onpopstate;f.onpopstate=function(...n){const r=f.location.href,s=v;if(v=r,p("history",{from:s,to:r}),e)try{return e.apply(this,n)}catch{}};function t(n){return function(...r){const s=r.length>2?r[2]:void 0;if(s){const i=v,o=String(s);v=o,p("history",{from:i,to:o})}return n.apply(this,r)}}m(f.history,"pushState",t),m(f.history,"replaceState",t)}const Ft=1e3;let L,P;function $t(e,t){if(!e||e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch{}return!1}function Yt(e){if(e.type!=="keypress")return!1;try{const t=e.target;if(!t||!t.tagName)return!0;if(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)return!1}catch{}return!0}function nt(e,t=!1){return n=>{if(!n||P===n||Yt(n))return;const r=n.type==="keypress"?"input":n.type;L===void 0?(e({event:n,name:r,global:t}),P=n):$t(P,n)&&(e({event:n,name:r,global:t}),P=n),clearTimeout(L),L=f.setTimeout(()=>{L=void 0},Ft)}}function qt(){if(!("document"in f))return;const e=p.bind(null,"dom"),t=nt(e,!0);f.document.addEventListener("click",t,!1),f.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{const r=f[n]&&f[n].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(m(r,"addEventListener",function(s){return function(i,o,c){if(i==="click"||i=="keypress")try{const a=this,u=a.__sentry_instrumentation_handlers__=a.__sentry_instrumentation_handlers__||{},h=u[i]=u[i]||{refCount:0};if(!h.handler){const _=nt(e);h.handler=_,s.call(this,i,_,c)}h.refCount++}catch{}return s.call(this,i,o,c)}}),m(r,"removeEventListener",function(s){return function(i,o,c){if(i==="click"||i=="keypress")try{const a=this,u=a.__sentry_instrumentation_handlers__||{},h=u[i];h&&(h.refCount--,h.refCount<=0&&(s.call(this,i,h.handler,c),h.handler=void 0,delete u[i]),Object.keys(u).length===0&&delete a.__sentry_instrumentation_handlers__)}catch{}return s.call(this,i,o,c)}}))})}let G=null;function Ct(){G=f.onerror,f.onerror=function(e,t,n,r,s){return p("error",{column:r,error:s,line:n,msg:e,url:t}),G?G.apply(this,arguments):!1}}let F=null;function Wt(){F=f.onunhandledrejection,f.onunhandledrejection=function(e){return p("unhandledrejection",e),F?F.apply(this,arguments):!0}}function N(){const e=l,t=e.crypto||e.msCrypto;if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");const n=t&&t.getRandomValues?()=>t.getRandomValues(new Uint8Array(1))[0]:()=>Math.random()*16;return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function ut(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function ye(e){const{message:t,event_id:n}=e;if(t)return t;const r=ut(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Ee(e,t,n){const r=e.exception=e.exception||{},s=r.values=r.values||[],i=s[0]=s[0]||{};i.value||(i.value=t||""),i.type||(i.type=n||"Error")}function Se(e,t){const n=ut(e);if(!n)return;const r={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism={...r,...s,...t},t&&"data"in t){const i={...s&&s.data,...t.data};n.mechanism.data=i}}function be(e){if(e&&e.__sentry_captured__)return!0;try{ct(e,"__sentry_captured__",!0)}catch{}return!1}function Jt(e){return Array.isArray(e)?e:[e]}function Xt(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function Te(){return"npm"}function ft(){return!Xt()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function U(e,t){return e.require(t)}function Oe(e){let t;try{t=U(module,e)}catch{}try{const{cwd:n}=U(module,"process");t=U(module,`${n()}/node_modules/${e}`)}catch{}return t}var g;(function(e){e[e.PENDING=0]="PENDING";const n=1;e[e.RESOLVED=n]="RESOLVED";const r=2;e[e.REJECTED=r]="REJECTED"})(g||(g={}));function De(e){return new d(t=>{t(e)})}function Ne(e){return new d((t,n)=>{n(e)})}class d{__init(){this._state=g.PENDING}__init2(){this._handlers=[]}constructor(t){d.prototype.__init.call(this),d.prototype.__init2.call(this),d.prototype.__init3.call(this),d.prototype.__init4.call(this),d.prototype.__init5.call(this),d.prototype.__init6.call(this);try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}then(t,n){return new d((r,s)=>{this._handlers.push([!1,i=>{if(!t)r(i);else try{r(t(i))}catch(o){s(o)}},i=>{if(!n)s(i);else try{r(n(i))}catch(o){s(o)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new d((n,r)=>{let s,i;return this.then(o=>{i=!1,s=o,t&&t()},o=>{i=!0,s=o,t&&t()}).then(()=>{if(i){r(s);return}n(s)})})}__init3(){this._resolve=t=>{this._setResult(g.RESOLVED,t)}}__init4(){this._reject=t=>{this._setResult(g.REJECTED,t)}}__init5(){this._setResult=(t,n)=>{if(this._state===g.PENDING){if(ot(n)){n.then(this._resolve,this._reject);return}this._state=t,this._value=n,this._executeHandlers()}}}__init6(){this._executeHandlers=()=>{if(this._state===g.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===g.RESOLVED&&n[1](this._value),this._state===g.REJECTED&&n[2](this._value),n[0]=!0)})}}}function Re(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+n+r}}function ke(e){return e.split(/[\?#]/,1)[0]}function we(e){return e.split(/\\?\//).filter(t=>t.length>0&&t!==",").length}const ht=x(),q={nowSeconds:()=>Date.now()/1e3};function Kt(){const{performance:e}=ht;if(!e||!e.now)return;const t=Date.now()-e.now();return{now:()=>e.now(),timeOrigin:t}}function Vt(){try{return U(module,"perf_hooks").performance}catch{return}}const $=ft()?Vt():Kt(),rt=$===void 0?q:{nowSeconds:()=>($.timeOrigin+$.now())/1e3},_t=q.nowSeconds.bind(q),J=rt.nowSeconds.bind(rt),ve=J,Le=(()=>{const{performance:e}=ht;if(!e||!e.now)return;const t=3600*1e3,n=e.now(),r=Date.now(),s=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=s<t,o=e.timing&&e.timing.navigationStart,a=typeof o=="number"?Math.abs(o+n-r):t,u=a<t;return i||u?s<=a?e.timeOrigin:o:r})();function Qt(e){const t=J(),n={sid:N(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Zt(n)};return e&&A(n,e),n}function A(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||J(),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:N()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function zt(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),A(e,n)}function Zt(e){return Rt({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}const te=100;class b{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}static clone(t){const n=new b;return t&&(n._breadcrumbs=[...t._breadcrumbs],n._tags={...t._tags},n._extra={...t._extra},n._contexts={...t._contexts},n._user=t._user,n._level=t._level,n._span=t._span,n._session=t._session,n._transactionName=t._transactionName,n._fingerprint=t._fingerprint,n._eventProcessors=[...t._eventProcessors],n._requestSession=t._requestSession,n._attachments=[...t._attachments],n._sdkProcessingMetadata={...t._sdkProcessingMetadata}),n}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{},this._session&&A(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const t=this.getSpan();return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;if(typeof t=="function"){const n=t(this);return n instanceof b?n:this}return t instanceof b?(this._tags={...this._tags,...t._tags},this._extra={...this._extra,...t._extra},this._contexts={...this._contexts,...t._contexts},t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession)):C(t)&&(t=t,this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this}addBreadcrumb(t,n){const r=typeof n=="number"?n:te;if(r<=0)return this;const s={timestamp:_t(),...t};return this._breadcrumbs=[...this._breadcrumbs,s].slice(-r),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(t,n={}){if(this._extra&&Object.keys(this._extra).length&&(t.extra={...this._extra,...t.extra}),this._tags&&Object.keys(this._tags).length&&(t.tags={...this._tags,...t.tags}),this._user&&Object.keys(this._user).length&&(t.user={...this._user,...t.user}),this._contexts&&Object.keys(this._contexts).length&&(t.contexts={...this._contexts,...t.contexts}),this._level&&(t.level=this._level),this._transactionName&&(t.transaction=this._transactionName),this._span){t.contexts={trace:this._span.getTraceContext(),...t.contexts};const r=this._span.transaction&&this._span.transaction.name;r&&(t.tags={transaction:r,...t.tags})}return this._applyFingerprint(t),t.breadcrumbs=[...t.breadcrumbs||[],...this._breadcrumbs],t.breadcrumbs=t.breadcrumbs.length>0?t.breadcrumbs:void 0,t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...this._sdkProcessingMetadata},this._notifyEventProcessors([...dt(),...this._eventProcessors],t,n)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}_notifyEventProcessors(t,n,r,s=0){return new d((i,o)=>{const c=t[s];if(n===null||typeof c!="function")i(n);else{const a=c({...n},r);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&c.id&&a===null&&E.log(`Event processor "${c.id}" dropped event`),ot(a)?a.then(u=>this._notifyEventProcessors(t,u,r,s+1).then(i)).then(null,o):this._notifyEventProcessors(t,a,r,s+1).then(i).then(null,o)}})}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}_applyFingerprint(t){t.fingerprint=t.fingerprint?Jt(t.fingerprint):[],this._fingerprint&&(t.fingerprint=t.fingerprint.concat(this._fingerprint)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}}function dt(){return W("globalEventProcessors",()=>[])}function Pe(e){dt().push(e)}const X=4,ee=100;class k{__init(){this._stack=[{}]}constructor(t,n=new b,r=X){this._version=r,k.prototype.__init.call(this),this.getStackTop().scope=n,t&&this.bindClient(t)}isOlderThan(t){return this._version<t}bindClient(t){const n=this.getStackTop();n.client=t,t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=b.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(t){const n=this.pushScope();try{t(n)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:N(),s=new Error("Sentry syntheticException");return this._withClient((i,o)=>{i.captureException(t,{originalException:t,syntheticException:s,...n,event_id:r},o)}),r}captureMessage(t,n,r){const s=this._lastEventId=r&&r.event_id?r.event_id:N(),i=new Error(t);return this._withClient((o,c)=>{o.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:s},c)}),s}captureEvent(t,n){const r=n&&n.event_id?n.event_id:N();return t.type||(this._lastEventId=r),this._withClient((s,i)=>{s.captureEvent(t,{...n,event_id:r},i)}),r}lastEventId(){return this._lastEventId}addBreadcrumb(t,n){const{scope:r,client:s}=this.getStackTop();if(!r||!s)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=ee}=s.getOptions&&s.getOptions()||{};if(o<=0)return;const a={timestamp:_t(),...t},u=i?at(()=>i(a,n)):a;u!==null&&r.addBreadcrumb(u,o)}setUser(t){const n=this.getScope();n&&n.setUser(t)}setTags(t){const n=this.getScope();n&&n.setTags(t)}setExtras(t){const n=this.getScope();n&&n.setExtras(t)}setTag(t,n){const r=this.getScope();r&&r.setTag(t,n)}setExtra(t,n){const r=this.getScope();r&&r.setExtra(t,n)}setContext(t,n){const r=this.getScope();r&&r.setContext(t,n)}configureScope(t){const{scope:n,client:r}=this.getStackTop();n&&r&&t(n)}run(t){const n=st(this);try{t(this)}finally{st(n)}}getIntegration(t){const n=this.getClient();if(!n)return null;try{return n.getIntegration(t)}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&E.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,n){return this._callExtensionMethod("startTransaction",t,n)}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const t=this.getStackTop(),n=t&&t.scope,r=n&&n.getSession();r&&zt(r),this._sendSessionUpdate(),n&&n.setSession()}startSession(t){const{scope:n,client:r}=this.getStackTop(),{release:s,environment:i}=r&&r.getOptions()||{},{userAgent:o}=l.navigator||{},c=Qt({release:s,environment:i,...n&&{user:n.getUser()},...o&&{userAgent:o},...t});if(n){const a=n.getSession&&n.getSession();a&&a.status==="ok"&&A(a,{status:"exited"}),this.endSession(),n.setSession(c)}return c}shouldSendDefaultPii(){const t=this.getClient(),n=t&&t.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:n}=this.getStackTop();if(!t)return;const r=t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_withClient(t){const{scope:n,client:r}=this.getStackTop();r&&t(r,n)}_callExtensionMethod(t,...n){const s=B().__SENTRY__;if(s&&s.extensions&&typeof s.extensions[t]=="function")return s.extensions[t].apply(this,n);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&E.warn(`Extension method ${t} couldn't be found, doing nothing.`)}}function B(){return l.__SENTRY__=l.__SENTRY__||{extensions:{},hub:void 0},l}function st(e){const t=B(),n=y(t);return K(t,e),n}function Ie(){const e=B();return(!lt(e)||y(e).isOlderThan(X))&&K(e,new k),ft()?ne(e):y(e)}function ne(e){try{const t=B().__SENTRY__,n=t&&t.extensions&&t.extensions.domain&&t.extensions.domain.active;if(!n)return y(e);if(!lt(n)||y(n).isOlderThan(X)){const r=y(e).getStackTop();K(n,new k(r.client,b.clone(r.scope)))}return y(n)}catch{return y(e)}}function lt(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function y(e){return W("hub",()=>new k,e)}function K(e,t){if(!e)return!1;const n=e.__SENTRY__=e.__SENTRY__||{};return n.hub=t,!0}export{k as $,Ee as A,Se as B,re as C,se as D,ie as E,pt as F,l as G,gt as H,pe as I,me as J,St as K,he as L,Re as M,Te as N,tt as O,wt as P,R as Q,ue as R,d as S,m as T,O as U,ge as V,Pt as W,ft as X,Le as Y,ve as Z,we as _,ae as a,y as a0,st as a1,ke as a2,J as a3,B as a4,Oe as a5,U as a6,yt as a7,fe as a8,De as b,Nt as c,Rt as d,_t as e,Ie as f,Lt as g,Jt as h,ce as i,Pe as j,N as k,E as l,b as m,be as n,oe as o,A as p,ot as q,Ne as r,C as s,Q as t,le as u,de as v,ye as w,_e as x,Dt as y,ct as z};
