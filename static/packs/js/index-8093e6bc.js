import{u as b,c as g,f as p,R as a,eE as h,bq as n,_ as e,a$ as y,a8 as A,G as v,bF as w,bG as M,bH as T,bJ as x,af as F,eb as S,cA as C,b0 as D,n as k}from"../index-961d4ed1.js";const s=k({passwordFieldLabel:{id:"security.fields.password.label",defaultMessage:"Password"},deleteHeader:{id:"security.headers.delete",defaultMessage:"Delete Account"},deleteText:{id:"security.text.delete",defaultMessage:"To delete your account, enter your password then click Delete Account. This is a permanent action that cannot be undone. Your account will be destroyed from this server, and a deletion request will be sent to other servers. It's not guaranteed that all servers will purge your account."},localDeleteText:{id:"security.text.delete.local",defaultMessage:"To delete your account, enter your password then click Delete Account. This is a permanent action that cannot be undone."},deleteSubmit:{id:"security.submit.delete",defaultMessage:"Delete Account"},deleteAccountSuccess:{id:"security.delete_account.success",defaultMessage:"Account successfully deleted."},deleteAccountFail:{id:"security.delete_account.fail",defaultMessage:"Account deletion failed."}}),H=()=>{const t=b(),c=g(),r=p(),[o,d]=a.useState(""),[i,l]=a.useState(!1),f=a.useCallback(u=>{u.persist(),d(u.target.value)},[]),m=a.useCallback(()=>{l(!0),c(h(o)).then(()=>{d(""),n.success(t.formatMessage(s.deleteAccountSuccess))}).finally(()=>{l(!1)}).catch(()=>{d(""),n.error(t.formatMessage(s.deleteAccountFail))})},[o,c,t]);return e(D,{variant:"rounded"},void 0,e(S,{backHref:"/settings"},void 0,e(C,{title:t.formatMessage(s.deleteHeader)})),e(y,{},void 0,e(A,{space:4},void 0,e(v,{theme:"muted"},void 0,t.formatMessage(r.federating?s.deleteText:s.localDeleteText)),e(w,{onSubmit:m},void 0,e(M,{labelText:t.formatMessage(s.passwordFieldLabel)},void 0,e(T,{type:"password",name:"password",onChange:f,value:o})),e(x,{},void 0,e(F,{type:"submit",theme:"danger",disabled:i},void 0,t.formatMessage(s.deleteSubmit)))))))};export{H as default};
