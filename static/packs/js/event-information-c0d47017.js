import{c as R,r as o,aN as q,p as N,aV as T,d as V,d9 as _,dX as z,_ as e,R as r,K as d,G as l,a8 as c,H as g,c7 as v,gV as L,gT as P,d4 as M,gW as A,aF as H,cN as G,d3 as Y,bO as j,d2 as B,C as K}from"../index-961d4ed1.js";const W=S=>{let{params:u}=S;const m=R(),y=o.useCallback(q(),[]),a=N(t=>y(t,{id:u.statusId})),{tileServer:w}=T(),p=V().get("displayMedia"),[k,h]=o.useState(!!a),[f,b]=o.useState(_(a,p));o.useEffect(()=>{m(z(u.statusId)).then(()=>{h(!0)}).catch(()=>{h(!0)}),b(_(a,p))},[u.statusId]);const x=()=>{b(!f)},D=t=>{t.preventDefault(),m(K("EVENT_MAP",{statusId:a.id}))},I=o.useCallback(()=>{var i;const t=a.event;if(!t.location)return null;const s=[e(r.Fragment,{},"event-name",t.location.get("name"))];(i=t.location.get("street"))!=null&&i.trim()&&s.push(e(r.Fragment,{},"event-street",e("br",{}),t.location.get("street")));const n=[t.location.get("postalCode"),t.location.get("locality"),t.location.get("country")].filter(F=>F).join(", ");return n&&s.push(e(r.Fragment,{},"event-address",e("br",{}),n)),w&&t.location.get("latitude")&&s.push(e(r.Fragment,{},"event-map",e("br",{}),e("a",{href:"#",className:"text-primary-600 hover:underline dark:text-accent-blue",onClick:D},void 0,e(d,{id:"event.show_on_map",defaultMessage:"Show on map"})))),t.location&&e(c,{space:1},void 0,e(l,{size:"xl",weight:"bold"},void 0,e(d,{id:"event.location",defaultMessage:"Location"})),e(g,{space:2,alignItems:"center"},void 0,e(v,{src:L}),e(l,{},void 0,s)))},[a]),C=o.useCallback(()=>{const t=a.event;if(!t.start_time)return null;const s=new Date(t.start_time),n=t.end_time&&new Date(t.end_time),i=n&&s.getDate()===n.getDate()&&s.getMonth()===n.getMonth()&&s.getFullYear()===n.getFullYear();return e(c,{space:1},void 0,e(l,{size:"xl",weight:"bold"},void 0,e(d,{id:"event.date",defaultMessage:"Date"})),e(g,{space:2,alignItems:"center"},void 0,e(v,{src:P}),e(l,{},void 0,e(M,{value:s,year:"numeric",month:"long",day:"2-digit",weekday:"long",hour:"2-digit",minute:"2-digit"}),n&&r.createElement(r.Fragment,null," - ",e(M,{value:n,year:i?void 0:"numeric",month:i?void 0:"long",day:i?void 0:"2-digit",weekday:i?void 0:"long",hour:"2-digit",minute:"2-digit"})))))},[a]),E=o.useCallback(()=>{var t;return(t=a.event)!=null&&t.links.size?e(c,{space:1},void 0,e(l,{size:"xl",weight:"bold"},void 0,e(d,{id:"event.website",defaultMessage:"External links"})),a.event.links.map(s=>e(g,{space:2,alignItems:"center"},void 0,e(v,{src:A}),e("a",{href:s.remote_url||s.url,className:"text-primary-600 hover:underline dark:text-accent-blue",target:"_blank"},void 0,(s.remote_url||s.url).replace(/^https?:\/\//,""))))):null},[a]);return!a&&k?e(H,{}):a?e(c,{className:"mt-4 sm:p-2",space:2},void 0,!!a.contentHtml.trim()&&e(c,{space:1},void 0,e(l,{size:"xl",weight:"bold"},void 0,e(d,{id:"event.description",defaultMessage:"Description"})),e(j,{status:a,collapsable:!1,translatable:!0}),e(B,{status:a})),e(Y,{status:a,showMedia:f,onToggleVisibility:x}),a.quote&&a.pleroma.get("quote_visible",!0)&&e(G,{statusId:a.quote}),I(),C(),E()):null};export{W as default};
