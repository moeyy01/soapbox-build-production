import{cI as P,r as N,R,_ as l,cJ as I,cG as m,Y as _,cK as S,cL as C,p as D,a1 as h,b0 as M,H as k,b3 as q,cM as A,a8 as E,bO as G,cN as H,cO as L}from"../index-961d4ed1.js";import{P as W}from"./poll-preview-bd47b324.js";const z=P({style:{},itemsDimensions:[],size:1,width:0}),K=s=>{let{media:t,defaultWidth:n}=s;const[i,d]=N.useState(n),e=a=>{a&&d(a.offsetWidth)},r=a=>{const o={};let c=[];return a===1?(o.height=i*9/16,c=[{w:"100%",h:"100%"}]):a===2?(o.height=i/2,c=[{w:"50%",h:"100%",r:"2px"},{w:"50%",h:"100%",l:"2px"}]):a===3?(o.height=i,c=[{w:"50%",h:"50%",b:"2px",r:"2px"},{w:"50%",h:"50%",b:"2px",l:"2px"},{w:"100%",h:"50%",t:"2px"}]):a>=4&&(o.height=i,c=[{w:"50%",h:"50%",b:"2px",r:"2px"},{w:"50%",h:"50%",b:"2px",l:"2px"},{w:"50%",h:"50%",t:"2px",r:"2px"},{w:"50%",h:"50%",t:"2px",l:"2px"}]),z({style:o,itemsDimensions:c,size:a,width:i})},u=(a,o)=>{const c=a.w,y=a.h,f=a.t||"auto",v=a.r||"auto",w=a.b||"auto",b=a.l||"auto",x=a.float||"left",g=a.pos||"relative";return l("div",{className:"media-gallery__item animate-pulse bg-primary-200",style:{position:g,float:x,left:b,top:f,right:v,bottom:w,height:y,width:c}},o)},p=r(t.size);return R.createElement("div",{className:"media-gallery media-gallery--placeholder",style:p.get("style"),ref:e},t.take(4).map((a,o)=>u(p.get("itemsDimensions")[o],o)))},O=I(),T=s=>s.in_reply_to_id?_(s.to||[]).map(t=>m({acct:t})):_(),$=s=>s.hasIn(["poll","options"])?s.poll.update("options",t=>t.map(n=>m({title:n}))):null,j=(s,t,n)=>{const i=s.me,d=O(s,i),e=t.in_reply_to_id,r=m({account:d,content:t.status.replace(new RegExp(`
`,"g"),"<br>"),id:`æœ«pending-${n}`,in_reply_to_account_id:s.statuses.getIn([e,"account"],null),in_reply_to_id:e,media_attachments:(t.media_ids||_()).map(u=>m({id:u})),mentions:T(t),poll:$(t),quote:t.quote_id,sensitive:t.sensitive,visibility:t.visibility});return S(C(r))},B=s=>!!s.content.match(/https?:\/\/\S*/),J=s=>{let{status:t}=s;return t.media_attachments&&!t.media_attachments.isEmpty()?l(K,{media:t.media_attachments}):!t.quote&&B(t)?l(L,{}):null},F=s=>{let{idempotencyKey:t,className:n,muted:i,thread:d=!1}=s;const e=D(u=>{const p=u.pending_statuses.get(t);return p?j(u,p,t):null});if(!e||!e.account)return null;const r=e.account;return l("div",{className:h("opacity-50",n)},void 0,l("div",{className:h("status",{"status-reply":!!e.in_reply_to_id,muted:i}),"data-id":e.id},void 0,l(M,{className:h("py-6 sm:p-5",`status-${e.visibility}`,{"status-reply":!!e.in_reply_to_id}),variant:d?"default":"rounded"},void 0,l("div",{className:"mb-4"},void 0,l(k,{justifyContent:"between",alignItems:"start"},void 0,l(q,{account:r,timestamp:e.created_at,hideActions:!0,withLinkToProfile:!1},r.id))),l("div",{className:"status__content-wrapper"},void 0,l(A,{status:e}),l(E,{space:4},void 0,l(G,{status:e,collapsable:!0}),l(J,{status:e}),e.poll&&l(W,{pollId:e.poll}),e.quote&&l(H,{statusId:e.quote}))))))};export{F as P};
