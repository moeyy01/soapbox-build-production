import{R as x,co as Bn}from"../index-961d4ed1.js";const ne=0,Rt=1,Pt=2,Ze=4;function Je(t,e){return n=>t(e(n))}function zn(t,e){return e(t)}function Qe(t,e){return n=>t(e,n)}function Be(t,e){return()=>t(e)}function oe(t,e){return e(t),t}function q(...t){return t}function Ln(t){t()}function ze(t){return()=>t}function kn(...t){return()=>{t.map(Ln)}}function re(t){return t!==void 0}function Gt(){}function j(t,e){return t(Rt,e)}function $(t,e){t(ne,e)}function xe(t){t(Pt)}function It(t){return t(Ze)}function H(t,e){return j(t,Qe(e,ne))}function zt(t,e){const n=t(Rt,o=>{n(),e(o)});return n}function F(){const t=[];return(e,n)=>{switch(e){case Pt:t.splice(0,t.length);return;case Rt:return t.push(n),()=>{const o=t.indexOf(n);o>-1&&t.splice(o,1)};case ne:t.slice().forEach(o=>{o(n)});return;default:throw new Error(`unrecognized action ${e}`)}}}function C(t){let e=t;const n=F();return(o,r)=>{switch(o){case Rt:r(e);break;case ne:e=r;break;case Ze:return e}return n(o,r)}}function Vn(t){let e,n;const o=()=>e&&e();return function(r,s){switch(r){case Rt:return s?n===s?void 0:(o(),n=s,e=j(t,s),e):(o(),Gt);case Pt:o(),n=null;return;default:throw new Error(`unrecognized action ${r}`)}}}function dt(t){return oe(F(),e=>H(t,e))}function it(t,e){return oe(C(e),n=>H(t,n))}function Pn(...t){return e=>t.reduceRight(zn,e)}function g(t,...e){const n=Pn(...e);return(o,r)=>{switch(o){case Rt:return j(t,n(r));case Pt:xe(t);return}}}function Xe(t,e){return t===e}function K(t=Xe){let e;return n=>o=>{t(e,o)||(e=o,n(o))}}function P(t){return e=>n=>{t(n)&&e(n)}}function y(t){return e=>Je(e,t)}function Et(t){return e=>()=>e(t)}function vt(t,e){return n=>o=>n(e=t(e,o))}function At(t){return e=>n=>{t>0?t--:e(n)}}function Ot(t){let e=null,n;return o=>r=>{e=r,!n&&(n=setTimeout(()=>{n=void 0,o(e)},t))}}function Le(t){let e,n;return o=>r=>{e=r,n&&clearTimeout(n),n=setTimeout(()=>{o(e)},t)}}function M(...t){const e=new Array(t.length);let n=0,o=null;const r=Math.pow(2,t.length)-1;return t.forEach((s,i)=>{const l=Math.pow(2,i);j(s,u=>{const d=n;n=n|l,e[i]=u,d!==r&&n===r&&o&&(o(),o=null)})}),s=>i=>{const l=()=>s([i].concat(e));n===r?l():o=l}}function ke(...t){return function(e,n){switch(e){case Rt:return kn(...t.map(o=>j(o,n)));case Pt:return;default:throw new Error(`unrecognized action ${e}`)}}}function _(t,e=Xe){return g(t,K(e))}function nt(...t){const e=F(),n=new Array(t.length);let o=0;const r=Math.pow(2,t.length)-1;return t.forEach((s,i)=>{const l=Math.pow(2,i);j(s,u=>{n[i]=u,o=o|l,o===r&&$(e,n)})}),function(s,i){switch(s){case Rt:return o===r&&i(n),j(e,i);case Pt:return xe(e);default:throw new Error(`unrecognized action ${s}`)}}}function W(t,e=[],{singleton:n}={singleton:!0}){return{id:Gn(),constructor:t,dependencies:e,singleton:n}}const Gn=()=>Symbol();function _n(t){const e=new Map,n=({id:o,constructor:r,dependencies:s,singleton:i})=>{if(i&&e.has(o))return e.get(o);const l=r(s.map(u=>n(u)));return i&&e.set(o,l),l};return n(t)}function Mn(t,e){const n={},o={};let r=0;const s=t.length;for(;r<s;)o[t[r]]=1,r+=1;for(const i in e)o.hasOwnProperty(i)||(n[i]=e[i]);return n}const Yt=typeof document<"u"?x.useLayoutEffect:x.useEffect;function tn(t,e,n){const o=Object.keys(e.required||{}),r=Object.keys(e.optional||{}),s=Object.keys(e.methods||{}),i=Object.keys(e.events||{}),l=x.createContext({});function u(f,S){f.propsReady&&$(f.propsReady,!1);for(const m of o){const p=f[e.required[m]];$(p,S[m])}for(const m of r)if(m in S){const p=f[e.optional[m]];$(p,S[m])}f.propsReady&&$(f.propsReady,!0)}function d(f){return s.reduce((S,m)=>(S[m]=p=>{const T=f[e.methods[m]];$(T,p)},S),{})}function a(f){return i.reduce((S,m)=>(S[m]=Vn(f[e.events[m]]),S),{})}return{Component:x.forwardRef((f,S)=>{const{children:m,...p}=f,[T]=x.useState(()=>oe(_n(t),c=>u(c,p))),[b]=x.useState(Be(a,T));return Yt(()=>{for(const c of i)c in p&&j(b[c],p[c]);return()=>{Object.values(b).map(xe)}},[p,b,T]),Yt(()=>{u(T,p)}),x.useImperativeHandle(S,ze(d(T))),x.createElement(l.Provider,{value:T},n?x.createElement(n,Mn([...o,...r,...i],p),m):m)}),usePublisher:f=>x.useCallback(Qe($,x.useContext(l)[f]),[f]),useEmitterValue:f=>{const m=x.useContext(l)[f],[p,T]=x.useState(Be(It,m));return Yt(()=>j(m,b=>{b!==p&&T(ze(b))}),[m,p]),p},useEmitter:(f,S)=>{const p=x.useContext(l)[f];Yt(()=>j(p,S),[S,p])}}}const An=typeof document<"u"?x.useLayoutEffect:x.useEffect,Fn=An;var mt=(t=>(t[t.DEBUG=0]="DEBUG",t[t.INFO=1]="INFO",t[t.WARN=2]="WARN",t[t.ERROR=3]="ERROR",t))(mt||{});const Nn={0:"debug",1:"log",2:"warn",3:"error"},Dn=()=>typeof globalThis>"u"?window:globalThis,bt=W(()=>{const t=C(3);return{log:C((n,o,r=1)=>{var s;const i=(s=Dn().VIRTUOSO_LOG_LEVEL)!=null?s:It(t);r>=i&&console[Nn[r]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",n,o)}),logLevel:t}},[],{singleton:!0});function we(t,e=!0){const n=x.useRef(null);let o=r=>{};if(typeof ResizeObserver<"u"){const r=x.useMemo(()=>new ResizeObserver(s=>{const i=s[0].target;i.offsetParent!==null&&t(i)}),[t]);o=s=>{s&&e?(r.observe(s),n.current=s):(n.current&&r.unobserve(n.current),n.current=null)}}return{ref:n,callbackRef:o}}function Lt(t,e=!0){return we(t,e).callbackRef}function Wn(t,e,n,o,r,s,i){const l=x.useCallback(u=>{const d=$n(u.children,e,"offsetHeight",r);let a=u.parentElement;for(;!a.dataset.virtuosoScroller;)a=a.parentElement;const h=a.lastElementChild.dataset.viewportType==="window",w=i?i.scrollTop:h?window.pageYOffset||document.documentElement.scrollTop:a.scrollTop,v=i?i.scrollHeight:h?document.documentElement.scrollHeight:a.scrollHeight,R=i?i.offsetHeight:h?window.innerHeight:a.offsetHeight;o({scrollTop:Math.max(w,0),scrollHeight:v,viewportHeight:R}),s==null||s(Un("row-gap",getComputedStyle(u).rowGap,r)),d!==null&&t(d)},[t,e,r,s,i,o]);return we(l,n)}function $n(t,e,n,o){const r=t.length;if(r===0)return null;const s=[];for(let i=0;i<r;i++){const l=t.item(i);if(!l||l.dataset.index===void 0)continue;const u=parseInt(l.dataset.index),d=parseFloat(l.dataset.knownSize),a=e(l,n);if(a===0&&o("Zero-sized element, this should not happen",{child:l},mt.ERROR),a===d)continue;const h=s[s.length-1];s.length===0||h.size!==a||h.endIndex!==u-1?s.push({startIndex:u,endIndex:u,size:a}):s[s.length-1].endIndex++}return s}function Un(t,e,n){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&n(`${t} was not resolved to pixel value correctly`,e,mt.WARN),e==="normal"?0:parseInt(e??"0",10)}function yt(t,e){return Math.round(t.getBoundingClientRect()[e])}function en(t,e){return Math.abs(t-e)<1.01}function nn(t,e,n,o=Gt,r){const s=x.useRef(null),i=x.useRef(null),l=x.useRef(null),u=x.useCallback(h=>{const w=h.target,v=w===window||w===document,R=v?window.pageYOffset||document.documentElement.scrollTop:w.scrollTop,f=v?document.documentElement.scrollHeight:w.scrollHeight,S=v?window.innerHeight:w.offsetHeight,m=()=>{t({scrollTop:Math.max(R,0),scrollHeight:f,viewportHeight:S})};h.suppressFlushSync?m():Bn.flushSync(m),i.current!==null&&(R===i.current||R<=0||R===f-S)&&(i.current=null,e(!0),l.current&&(clearTimeout(l.current),l.current=null))},[t,e]);x.useEffect(()=>{const h=r||s.current;return o(r||s.current),u({target:h,suppressFlushSync:!0}),h.addEventListener("scroll",u,{passive:!0}),()=>{o(null),h.removeEventListener("scroll",u)}},[s,u,n,o,r]);function d(h){const w=s.current;if(!w||"offsetHeight"in w&&w.offsetHeight===0)return;const v=h.behavior==="smooth";let R,f,S;w===window?(f=Math.max(yt(document.documentElement,"height"),document.documentElement.scrollHeight),R=window.innerHeight,S=document.documentElement.scrollTop):(f=w.scrollHeight,R=yt(w,"height"),S=w.scrollTop);const m=f-R;if(h.top=Math.ceil(Math.max(Math.min(m,h.top),0)),en(R,f)||h.top===S){t({scrollTop:S,scrollHeight:f,viewportHeight:R}),v&&e(!0);return}v?(i.current=h.top,l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{l.current=null,i.current=null,e(!0)},1e3)):i.current=null,w.scrollTo(h)}function a(h){s.current.scrollBy(h)}return{scrollerRef:s,scrollByCallback:a,scrollToCallback:d}}const lt=W(()=>{const t=F(),e=F(),n=C(0),o=F(),r=C(0),s=F(),i=F(),l=C(0),u=C(0),d=C(0),a=C(0),h=F(),w=F(),v=C(!1);return H(g(t,y(({scrollTop:R})=>R)),e),H(g(t,y(({scrollHeight:R})=>R)),i),H(e,r),{scrollContainerState:t,scrollTop:e,viewportHeight:s,headerHeight:l,fixedHeaderHeight:u,fixedFooterHeight:d,footerHeight:a,scrollHeight:i,smoothScrollTargetReached:o,scrollTo:h,scrollBy:w,statefulScrollTop:r,deviation:n,scrollingInProgress:v}},[],{singleton:!0}),Ft={lvl:0};function on(t,e,n,o=Ft,r=Ft){return{k:t,v:e,lvl:n,l:o,r}}function U(t){return t===Ft}function Vt(){return Ft}function pe(t,e){if(U(t))return Ft;const{k:n,l:o,r}=t;if(e===n){if(U(o))return r;if(U(r))return o;{const[s,i]=rn(o);return Zt(X(t,{k:s,v:i,l:sn(o)}))}}else return e<n?Zt(X(t,{l:pe(o,e)})):Zt(X(t,{r:pe(r,e)}))}function Nt(t,e){if(!U(t))return e===t.k?t.v:e<t.k?Nt(t.l,e):Nt(t.r,e)}function wt(t,e,n="k"){if(U(t))return[-1/0,void 0];if(Number(t[n])===e)return[t.k,t.v];if(Number(t[n])<e){const o=wt(t.r,e,n);return o[0]===-1/0?[t.k,t.v]:o}return wt(t.l,e,n)}function ft(t,e,n){return U(t)?on(e,n,1):e===t.k?X(t,{k:e,v:n}):e<t.k?Ve(X(t,{l:ft(t.l,e,n)})):Ve(X(t,{r:ft(t.r,e,n)}))}function he(t,e,n){if(U(t))return[];const{k:o,v:r,l:s,r:i}=t;let l=[];return o>e&&(l=l.concat(he(s,e,n))),o>=e&&o<=n&&l.push({k:o,v:r}),o<=n&&(l=l.concat(he(i,e,n))),l}function Bt(t){return U(t)?[]:[...Bt(t.l),{k:t.k,v:t.v},...Bt(t.r)]}function rn(t){return U(t.r)?[t.k,t.v]:rn(t.r)}function sn(t){return U(t.r)?t.l:Zt(X(t,{r:sn(t.r)}))}function X(t,e){return on(e.k!==void 0?e.k:t.k,e.v!==void 0?e.v:t.v,e.lvl!==void 0?e.lvl:t.lvl,e.l!==void 0?e.l:t.l,e.r!==void 0?e.r:t.r)}function ae(t){return U(t)||t.lvl>t.r.lvl}function Ve(t){return ge(cn(t))}function Zt(t){const{l:e,r:n,lvl:o}=t;if(n.lvl>=o-1&&e.lvl>=o-1)return t;if(o>n.lvl+1){if(ae(e))return cn(X(t,{lvl:o-1}));if(!U(e)&&!U(e.r))return X(e.r,{l:X(e,{r:e.r.l}),r:X(t,{l:e.r.r,lvl:o-1}),lvl:o});throw new Error("Unexpected empty nodes")}else{if(ae(t))return ge(X(t,{lvl:o-1}));if(!U(n)&&!U(n.l)){const r=n.l,s=ae(r)?n.lvl-1:n.lvl;return X(r,{l:X(t,{r:r.l,lvl:o-1}),r:ge(X(n,{l:r.r,lvl:s})),lvl:r.lvl+1})}else throw new Error("Unexpected empty nodes")}}function se(t,e,n){if(U(t))return[];const o=wt(t,e)[0];return jn(he(t,o,n))}function ln(t,e){const n=t.length;if(n===0)return[];let{index:o,value:r}=e(t[0]);const s=[];for(let i=1;i<n;i++){const{index:l,value:u}=e(t[i]);s.push({start:o,end:l-1,value:r}),o=l,r=u}return s.push({start:o,end:1/0,value:r}),s}function jn(t){return ln(t,({k:e,v:n})=>({index:e,value:n}))}function ge(t){const{r:e,lvl:n}=t;return!U(e)&&!U(e.r)&&e.lvl===n&&e.r.lvl===n?X(e,{l:X(t,{r:e.l}),lvl:n+1}):t}function cn(t){const{l:e}=t;return!U(e)&&e.lvl===t.lvl?X(e,{r:X(t,{l:e.r})}):t}function Qt(t,e,n,o=0){let r=t.length-1;for(;o<=r;){const s=Math.floor((o+r)/2),i=t[s],l=n(i,e);if(l===0)return s;if(l===-1){if(r-o<2)return s-1;r=s-1}else{if(r===o)return s;o=s+1}}throw new Error(`Failed binary finding record in array - ${t.join(",")}, searched for ${e}`)}function un(t,e,n){return t[Qt(t,e,n)]}function Kn(t,e,n,o){const r=Qt(t,e,o),s=Qt(t,n,o,r);return t.slice(r,s+1)}const Te=W(()=>({recalcInProgress:C(!1)}),[],{singleton:!0});function qn(t){const{size:e,startIndex:n,endIndex:o}=t;return r=>r.start===n&&(r.end===o||r.end===1/0)&&r.value===e}function Pe(t,e){let n=0,o=0;for(;n<t;)n+=e[o+1]-e[o]-1,o++;return o-(n===t?0:1)}function Yn(t,e){let n=U(t)?0:1/0;for(const o of e){const{size:r,startIndex:s,endIndex:i}=o;if(n=Math.min(n,s),U(t)){t=ft(t,0,r);continue}const l=se(t,s-1,i+1);if(l.some(qn(o)))continue;let u=!1,d=!1;for(const{start:a,end:h,value:w}of l)u?(i>=a||r===w)&&(t=pe(t,a)):(d=w!==r,u=!0),h>i&&i>=a&&w!==r&&(t=ft(t,i+1,w));d&&(t=ft(t,s,r))}return[t,n]}function Zn(){return{offsetTree:[],sizeTree:Vt(),groupOffsetTree:Vt(),lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]}}function ve({index:t},e){return e===t?0:e<t?-1:1}function Jn({offset:t},e){return e===t?0:e<t?-1:1}function Qn(t){return{index:t.index,value:t}}function Xn(t,e,n,o=0){return o>0&&(e=Math.max(e,un(t,o,ve).offset)),ln(Kn(t,e,n,Jn),Qn)}function Ie(t,e,n,o){let r=t,s=0,i=0,l=0,u=0;if(e!==0){u=Qt(r,e-1,ve),l=r[u].offset;const a=wt(n,e-1);s=a[0],i=a[1],r.length&&r[u].size===wt(n,e)[1]&&(u-=1),r=r.slice(0,u+1)}else r=[];for(const{start:d,value:a}of se(n,e,1/0)){const h=d-s,w=h*i+l+h*o;r.push({offset:w,size:a,index:d}),s=d,l=w,i=a}return{offsetTree:r,lastIndex:s,lastOffset:l,lastSize:i}}function to(t,[e,n,o,r]){e.length>0&&o("received item sizes",e,mt.DEBUG);const s=t.sizeTree;let i=s,l=0;if(n.length>0&&U(s)&&e.length===2){const w=e[0].size,v=e[1].size;i=n.reduce((R,f)=>ft(ft(R,f,w),f+1,v),i)}else[i,l]=Yn(i,e);if(i===s)return t;const{offsetTree:u,lastIndex:d,lastSize:a,lastOffset:h}=Ie(t.offsetTree,l,i,r);return{sizeTree:i,offsetTree:u,lastIndex:d,lastOffset:h,lastSize:a,groupOffsetTree:n.reduce((w,v)=>ft(w,v,Dt(v,u,r)),Vt()),groupIndices:n}}function Dt(t,e,n){if(e.length===0)return 0;const{offset:o,index:r,size:s}=un(e,t,ve),i=t-r,l=s*i+(i-1)*n+o;return l>0?l+n:l}function eo(t){return typeof t.groupIndex<"u"}function an(t,e,n){if(eo(t))return e.groupIndices[t.groupIndex]+1;{const o=t.index==="LAST"?n:t.index;let r=fn(o,e);return r=Math.max(0,r,Math.min(n,r)),r}}function fn(t,e){if(!ie(e))return t;let n=0;for(;e.groupIndices[n]<=t+n;)n++;return t+n}function ie(t){return!U(t.groupOffsetTree)}function no(t){return Bt(t).map(({k:e,v:n},o,r)=>{const s=r[o+1],i=s?s.k-1:1/0;return{startIndex:e,endIndex:i,size:n}})}const oo={offsetHeight:"height",offsetWidth:"width"},Ct=W(([{log:t},{recalcInProgress:e}])=>{const n=F(),o=F(),r=it(o,0),s=F(),i=F(),l=C(0),u=C([]),d=C(void 0),a=C(void 0),h=C((c,I)=>yt(c,oo[I])),w=C(void 0),v=C(0),R=Zn(),f=it(g(n,M(u,t,v),vt(to,R),K()),R),S=it(g(u,K(),vt((c,I)=>({prev:c.current,current:I}),{prev:[],current:[]}),y(({prev:c})=>c)),[]);H(g(u,P(c=>c.length>0),M(f,v),y(([c,I,E])=>{const V=c.reduce((B,k,z)=>ft(B,k,Dt(k,I.offsetTree,E)||z),Vt());return{...I,groupIndices:c,groupOffsetTree:V}})),f),H(g(o,M(f),P(([c,{lastIndex:I}])=>c<I),y(([c,{lastIndex:I,lastSize:E}])=>[{startIndex:c,endIndex:I,size:E}])),n),H(d,a);const m=it(g(d,y(c=>c===void 0)),!0);H(g(a,P(c=>c!==void 0&&U(It(f).sizeTree)),y(c=>[{startIndex:0,endIndex:0,size:c}])),n);const p=dt(g(n,M(f),vt(({sizes:c},[I,E])=>({changed:E!==c,sizes:E}),{changed:!1,sizes:R}),y(c=>c.changed)));j(g(l,vt((c,I)=>({diff:c.prev-I,prev:I}),{diff:0,prev:0}),y(c=>c.diff)),c=>{const{groupIndices:I}=It(f);if(c>0)$(e,!0),$(s,c+Pe(c,I));else if(c<0){const E=It(S);E.length>0&&(c-=Pe(-c,E)),$(i,c)}}),j(g(l,M(t)),([c,I])=>{c<0&&I("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:l},mt.ERROR)});const T=dt(s);H(g(s,M(f),y(([c,I])=>{const E=I.groupIndices.length>0,V=[],B=I.lastSize;if(E){const k=Nt(I.sizeTree,0);let z=0,D=0;for(;z<c;){const G=I.groupIndices[D],Z=I.groupIndices.length===D+1?1/0:I.groupIndices[D+1]-G-1;V.push({startIndex:G,endIndex:G,size:k}),V.push({startIndex:G+1,endIndex:G+1+Z-1,size:B}),D++,z+=Z+1}const N=Bt(I.sizeTree);return z!==c&&N.shift(),N.reduce((G,{k:Z,v:Tt})=>{let pt=G.ranges;return G.prevSize!==0&&(pt=[...G.ranges,{startIndex:G.prevIndex,endIndex:Z+c-1,size:G.prevSize}]),{ranges:pt,prevIndex:Z+c,prevSize:Tt}},{ranges:V,prevIndex:c,prevSize:0}).ranges}return Bt(I.sizeTree).reduce((k,{k:z,v:D})=>({ranges:[...k.ranges,{startIndex:k.prevIndex,endIndex:z+c-1,size:k.prevSize}],prevIndex:z+c,prevSize:D}),{ranges:[],prevIndex:0,prevSize:B}).ranges})),n);const b=dt(g(i,M(f,v),y(([c,{offsetTree:I},E])=>{const V=-c;return Dt(V,I,E)})));return H(g(i,M(f,v),y(([c,I,E])=>{if(I.groupIndices.length>0){if(U(I.sizeTree))return I;let B=Vt();const k=It(S);let z=0,D=0,N=0;for(;z<-c;){N=k[D];const G=k[D+1]-N-1;D++,z+=G+1}if(B=Bt(I.sizeTree).reduce((G,{k:Z,v:Tt})=>ft(G,Math.max(0,Z+c),Tt),B),z!==-c){const G=Nt(I.sizeTree,N);B=ft(B,0,G);const Z=wt(I.sizeTree,-c+1)[1];B=ft(B,1,Z)}return{...I,sizeTree:B,...Ie(I.offsetTree,0,B,E)}}else{const B=Bt(I.sizeTree).reduce((k,{k:z,v:D})=>ft(k,Math.max(0,z+c),D),Vt());return{...I,sizeTree:B,...Ie(I.offsetTree,0,B,E)}}})),f),{data:w,totalCount:o,sizeRanges:n,groupIndices:u,defaultItemSize:a,fixedItemSize:d,unshiftWith:s,shiftWith:i,shiftWithOffset:b,beforeUnshiftWith:T,firstItemIndex:l,gap:v,sizes:f,listRefresh:p,statefulTotalCount:r,trackItemSizes:m,itemSize:h}},q(bt,Te),{singleton:!0}),ro=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function dn(t){const e=typeof t=="number"?{index:t}:t;return e.align||(e.align="start"),(!e.behavior||!ro)&&(e.behavior="auto"),e.offset||(e.offset=0),e}const Ut=W(([{sizes:t,totalCount:e,listRefresh:n,gap:o},{scrollingInProgress:r,viewportHeight:s,scrollTo:i,smoothScrollTargetReached:l,headerHeight:u,footerHeight:d,fixedHeaderHeight:a,fixedFooterHeight:h},{log:w}])=>{const v=F(),R=C(0);let f=null,S=null,m=null;function p(){f&&(f(),f=null),m&&(m(),m=null),S&&(clearTimeout(S),S=null),$(r,!1)}return H(g(v,M(t,s,e,R,u,d,w),M(o,a,h),y(([[T,b,c,I,E,V,B,k],z,D,N])=>{const L=dn(T),{align:G,behavior:Z,offset:Tt}=L,pt=I-1,ht=an(L,b,pt);let O=Dt(ht,b.offsetTree,z)+V;G==="end"?(O+=D+wt(b.sizeTree,ht)[1]-c+N,ht===pt&&(O+=B)):G==="center"?O+=(D+wt(b.sizeTree,ht)[1]-c+N)/2:O-=E,Tt&&(O+=Tt);const Q=tt=>{p(),tt?(k("retrying to scroll to",{location:T},mt.DEBUG),$(v,T)):k("list did not change, scroll successful",{},mt.DEBUG)};if(p(),Z==="smooth"){let tt=!1;m=j(n,ct=>{tt=tt||ct}),f=zt(l,()=>{Q(tt)})}else f=zt(g(n,so(150)),Q);return S=setTimeout(()=>{p()},1200),$(r,!0),k("scrolling from index to",{index:ht,top:O,behavior:Z},mt.DEBUG),{top:O,behavior:Z}})),i),{scrollToIndex:v,topListHeight:R}},q(Ct,lt,bt),{singleton:!0});function so(t){return e=>{const n=setTimeout(()=>{e(!1)},t);return o=>{o&&(e(!0),clearTimeout(n))}}}const Wt="up",_t="down",io="none",lo={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},co=0,jt=W(([{scrollContainerState:t,scrollTop:e,viewportHeight:n,headerHeight:o,footerHeight:r,scrollBy:s}])=>{const i=C(!1),l=C(!0),u=F(),d=F(),a=C(4),h=C(co),w=it(g(ke(g(_(e),At(1),Et(!0)),g(_(e),At(1),Et(!1),Le(100))),K()),!1),v=it(g(ke(g(s,Et(!0)),g(s,Et(!1),Le(200))),K()),!1);H(g(nt(_(e),_(h)),y(([p,T])=>p<=T),K()),l),H(g(l,Ot(50)),d);const R=dt(g(nt(t,_(n),_(o),_(r),_(a)),vt((p,[{scrollTop:T,scrollHeight:b},c,I,E,V])=>{const B=T+c-b>-V,k={viewportHeight:c,scrollTop:T,scrollHeight:b};if(B){let D,N;return T>p.state.scrollTop?(D="SCROLLED_DOWN",N=p.state.scrollTop-T):(D="SIZE_DECREASED",N=p.state.scrollTop-T||p.scrollTopDelta),{atBottom:!0,state:k,atBottomBecause:D,scrollTopDelta:N}}let z;return k.scrollHeight>p.state.scrollHeight?z="SIZE_INCREASED":c<p.state.viewportHeight?z="VIEWPORT_HEIGHT_DECREASING":T<p.state.scrollTop?z="SCROLLING_UPWARDS":z="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:z,state:k}},lo),K((p,T)=>p&&p.atBottom===T.atBottom))),f=it(g(t,vt((p,{scrollTop:T,scrollHeight:b,viewportHeight:c})=>{if(en(p.scrollHeight,b))return{scrollTop:T,scrollHeight:b,jump:0,changed:!1};{const I=b-(T+c)<1;return p.scrollTop!==T&&I?{scrollHeight:b,scrollTop:T,jump:p.scrollTop-T,changed:!0}:{scrollHeight:b,scrollTop:T,jump:0,changed:!0}}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),P(p=>p.changed),y(p=>p.jump)),0);H(g(R,y(p=>p.atBottom)),i),H(g(i,Ot(50)),u);const S=C(_t);H(g(t,y(({scrollTop:p})=>p),K(),vt((p,T)=>It(v)?{direction:p.direction,prevScrollTop:T}:{direction:T<p.prevScrollTop?Wt:_t,prevScrollTop:T},{direction:_t,prevScrollTop:0}),y(p=>p.direction)),S),H(g(t,Ot(50),Et(io)),S);const m=C(0);return H(g(w,P(p=>!p),Et(0)),m),H(g(e,Ot(100),M(w),P(([p,T])=>!!T),vt(([p,T],[b])=>[T,b],[0,0]),y(([p,T])=>T-p)),m),{isScrolling:w,isAtTop:l,isAtBottom:i,atBottomState:R,atTopStateChange:d,atBottomStateChange:u,scrollDirection:S,atBottomThreshold:a,atTopThreshold:h,scrollVelocity:m,lastJumpDueToItemResize:f}},q(lt)),Ht=W(([{log:t}])=>{const e=C(!1),n=dt(g(e,P(o=>o),K()));return j(e,o=>{o&&It(t)("props updated",{},mt.DEBUG)}),{propsReady:e,didMount:n}},q(bt),{singleton:!0});function uo(t,e){const n=e-1;return typeof t=="number"?t:t.index==="LAST"?n:t.index}function mn(t,e){t==0?e():requestAnimationFrame(()=>mn(t-1,e))}const le=W(([{sizes:t,listRefresh:e,defaultItemSize:n},{scrollTop:o},{scrollToIndex:r},{didMount:s}])=>{const i=C(!0),l=C(0),u=C(!1);return H(g(s,M(l),P(([d,a])=>!!a),Et(!1)),i),j(g(nt(e,s),M(i,t,n,u),P(([[,d],a,{sizeTree:h},w,v])=>d&&(!U(h)||re(w))&&!a&&!v),M(l)),([,d])=>{$(u,!0),mn(2,()=>{zt(o,()=>$(i,!0)),$(r,d)})}),{scrolledToInitialItem:i,initialTopMostItemIndex:l}},q(Ct,lt,Ut,Ht),{singleton:!0});function Ge(t){return t?t==="smooth"?"smooth":"auto":!1}const ao=(t,e)=>typeof t=="function"?Ge(t(e)):e&&Ge(t),fo=W(([{totalCount:t,listRefresh:e},{isAtBottom:n,atBottomState:o},{scrollToIndex:r},{scrolledToInitialItem:s},{propsReady:i,didMount:l},{log:u},{scrollingInProgress:d}])=>{const a=C(!1),h=F();let w=null;function v(f){$(r,{index:"LAST",align:"end",behavior:f})}j(g(nt(g(_(t),At(1)),l),M(_(a),n,s,d),y(([[f,S],m,p,T,b])=>{let c=S&&T,I="auto";return c&&(I=ao(m,p||b),c=c&&!!I),{totalCount:f,shouldFollow:c,followOutputBehavior:I}}),P(({shouldFollow:f})=>f)),({totalCount:f,followOutputBehavior:S})=>{w&&(w(),w=null),w=zt(e,()=>{It(u)("following output to ",{totalCount:f},mt.DEBUG),v(S),w=null})});function R(f){const S=zt(o,m=>{f&&!m.atBottom&&m.notAtBottomBecause==="SIZE_INCREASED"&&!w&&(It(u)("scrolling to bottom due to increased size",{},mt.DEBUG),v("auto"))});setTimeout(S,100)}return j(g(nt(_(a),t,i),P(([f,,S])=>f&&S),vt(({value:f},[,S])=>({refreshed:f===S,value:S}),{refreshed:!1,value:0}),P(({refreshed:f})=>f),M(a,t)),([,f])=>{R(f!==!1)}),j(h,()=>{R(It(a)!==!1)}),j(nt(_(a),o),([f,S])=>{f&&!S.atBottom&&S.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&v("auto")}),{followOutput:a,autoscrollToBottom:h}},q(Ct,jt,Ut,le,Ht,bt,lt));function mo(t){return t.reduce((e,n)=>(e.groupIndices.push(e.totalCount),e.totalCount+=n+1,e),{totalCount:0,groupIndices:[]})}const pn=W(([{totalCount:t,groupIndices:e,sizes:n},{scrollTop:o,headerHeight:r}])=>{const s=F(),i=F(),l=dt(g(s,y(mo)));return H(g(l,y(u=>u.totalCount)),t),H(g(l,y(u=>u.groupIndices)),e),H(g(nt(o,n,r),P(([u,d])=>ie(d)),y(([u,d,a])=>wt(d.groupOffsetTree,Math.max(u-a,0),"v")[0]),K(),y(u=>[u])),i),{groupCounts:s,topItemsIndexes:i}},q(Ct,lt));function $t(t,e){return!!(t&&t[0]===e[0]&&t[1]===e[1])}function hn(t,e){return!!(t&&t.startIndex===e.startIndex&&t.endIndex===e.endIndex)}const Xt="top",te="bottom",_e="none";function Me(t,e,n){return typeof t=="number"?n===Wt&&e===Xt||n===_t&&e===te?t:0:n===Wt?e===Xt?t.main:t.reverse:e===te?t.main:t.reverse}function Ae(t,e){return typeof t=="number"?t:t[e]||0}const Ce=W(([{scrollTop:t,viewportHeight:e,deviation:n,headerHeight:o,fixedHeaderHeight:r}])=>{const s=F(),i=C(0),l=C(0),u=C(0),d=it(g(nt(_(t),_(e),_(o),_(s,$t),_(u),_(i),_(r),_(n),_(l)),y(([a,h,w,[v,R],f,S,m,p,T])=>{const b=a-p,c=S+m,I=Math.max(w-b,0);let E=_e;const V=Ae(T,Xt),B=Ae(T,te);return v-=p,v+=w+m,R+=w+m,R-=p,v>a+c-V&&(E=Wt),R<a-I+h+B&&(E=_t),E!==_e?[Math.max(b-w-Me(f,Xt,E)-V,0),b-I-m+h+Me(f,te,E)+B]:null}),P(a=>a!=null),K($t)),[0,0]);return{listBoundary:s,overscan:u,topListHeight:i,increaseViewportBy:l,visibleRange:d}},q(lt),{singleton:!0});function po(t,e,n){if(ie(e)){const o=fn(t,e);return[{index:wt(e.groupOffsetTree,o)[0],size:0,offset:0},{index:o,size:0,offset:0,data:n&&n[0]}]}return[{index:t,size:0,offset:0,data:n&&n[0]}]}const Fe={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0};function Ne(t,e,n){if(t.length===0)return[];if(!ie(e))return t.map(d=>({...d,index:d.index+n,originalIndex:d.index}));const o=t[0].index,r=t[t.length-1].index,s=[],i=se(e.groupOffsetTree,o,r);let l,u=0;for(const d of t){(!l||l.end<d.index)&&(l=i.shift(),u=e.groupIndices.indexOf(l.start));let a;d.index===l.start?a={type:"group",index:u}:a={index:d.index-(u+1)+n,groupIndex:u},s.push({...a,size:d.size,offset:d.offset,originalIndex:d.index,data:d.data})}return s}function Jt(t,e,n,o,r,s){const{lastSize:i,lastOffset:l,lastIndex:u}=r;let d=0,a=0;if(t.length>0){d=t[0].offset;const f=t[t.length-1];a=f.offset+f.size}const h=n-u,w=l+h*i+(h-1)*o,v=d,R=w-a;return{items:Ne(t,r,s),topItems:Ne(e,r,s),topListHeight:e.reduce((f,S)=>S.size+f,0),offsetTop:d,offsetBottom:R,top:v,bottom:a,totalCount:n,firstItemIndex:s}}const kt=W(([{sizes:t,totalCount:e,data:n,firstItemIndex:o,gap:r},s,{visibleRange:i,listBoundary:l,topListHeight:u},{scrolledToInitialItem:d,initialTopMostItemIndex:a},{topListHeight:h},w,{didMount:v},{recalcInProgress:R}])=>{const f=C([]),S=F();H(s.topItemsIndexes,f);const m=it(g(nt(v,R,_(i,$t),_(e),_(t),_(a),d,_(f),_(o),_(r),n),P(([c,I,,E,,,,,,,V])=>{const B=V&&V.length!==E;return c&&!I&&!B}),y(([,,[c,I],E,V,B,k,z,D,N,L])=>{const G=V,{sizeTree:Z,offsetTree:Tt}=G;if(E===0||c===0&&I===0)return{...Fe,totalCount:E};if(U(Z))return Jt(po(uo(B,E),G,L),[],E,N,G,D);const pt=[];if(z.length>0){const ct=z[0],ut=z[z.length-1];let ot=0;for(const rt of se(Z,ct,ut)){const et=rt.value,gt=Math.max(rt.start,ct),st=Math.min(rt.end,ut);for(let Y=gt;Y<=st;Y++)pt.push({index:Y,size:et,offset:ot,data:L&&L[Y]}),ot+=et}}if(!k)return Jt([],pt,E,N,G,D);const ht=z.length>0?z[z.length-1]+1:0,O=Xn(Tt,c,I,ht);if(O.length===0)return null;const Q=E-1,tt=oe([],ct=>{for(const ut of O){const ot=ut.value;let rt=ot.offset,et=ut.start;const gt=ot.size;if(ot.offset<c){et+=Math.floor((c-ot.offset+N)/(gt+N));const Y=et-ut.start;rt+=Y*gt+Y*N}et<ht&&(rt+=(ht-et)*gt,et=ht);const st=Math.min(ut.end,Q);for(let Y=et;Y<=st&&!(rt>=I);Y++)ct.push({index:Y,size:gt,offset:rt,data:L&&L[Y]}),rt+=gt+N}});return Jt(tt,pt,E,N,G,D)}),P(c=>c!==null),K()),Fe);H(g(n,P(re),y(c=>c==null?void 0:c.length)),e),H(g(m,y(c=>c.topListHeight)),h),H(h,u),H(g(m,y(c=>[c.top,c.bottom])),l),H(g(m,y(c=>c.items)),S);const p=dt(g(m,P(({items:c})=>c.length>0),M(e,n),P(([{items:c},I])=>c[c.length-1].originalIndex===I-1),y(([,c,I])=>[c-1,I]),K($t),y(([c])=>c))),T=dt(g(m,Ot(200),P(({items:c,topItems:I})=>c.length>0&&c[0].originalIndex===I.length),y(({items:c})=>c[0].index),K())),b=dt(g(m,P(({items:c})=>c.length>0),y(({items:c})=>{let I=0,E=c.length-1;for(;c[I].type==="group"&&I<E;)I++;for(;c[E].type==="group"&&E>I;)E--;return{startIndex:c[I].index,endIndex:c[E].index}}),K(hn)));return{listState:m,topItemsIndexes:f,endReached:p,startReached:T,rangeChanged:b,itemsRendered:S,...w}},q(Ct,pn,Ce,le,Ut,jt,Ht,Te),{singleton:!0}),ho=W(([{sizes:t,firstItemIndex:e,data:n,gap:o},{listState:r},{didMount:s}])=>{const i=C(0);return H(g(s,M(i),P(([,l])=>l!==0),M(t,e,o,n),y(([[,l],u,d,a,h=[]])=>{let w=0;if(u.groupIndices.length>0)for(const f of u.groupIndices){if(f-w>=l)break;w++}const v=l+w,R=Array.from({length:v}).map((f,S)=>({index:S,size:0,offset:0,data:h[S]}));return Jt(R,[],v,a,u,d)})),r),{initialItemCount:i}},q(Ct,kt,Ht),{singleton:!0}),gn=W(([{scrollVelocity:t}])=>{const e=C(!1),n=F(),o=C(!1);return H(g(t,M(o,e,n),P(([r,s])=>!!s),y(([r,s,i,l])=>{const{exit:u,enter:d}=s;if(i){if(u(r,l))return!1}else if(d(r,l))return!0;return i}),K()),e),j(g(nt(e,t,n),M(o)),([[r,s,i],l])=>r&&l&&l.change&&l.change(s,i)),{isSeeking:e,scrollSeekConfiguration:o,scrollVelocity:t,scrollSeekRangeChanged:n}},q(jt),{singleton:!0}),go=W(([{topItemsIndexes:t}])=>{const e=C(0);return H(g(e,P(n=>n>0),y(n=>Array.from({length:n}).map((o,r)=>r))),t),{topItemCount:e}},q(kt)),In=W(([{footerHeight:t,headerHeight:e,fixedHeaderHeight:n,fixedFooterHeight:o},{listState:r}])=>{const s=F(),i=it(g(nt(t,o,e,n,r),y(([l,u,d,a,h])=>l+u+d+a+h.offsetBottom+h.bottom)),0);return H(_(i),s),{totalListHeight:i,totalListHeightChanged:s}},q(lt,kt),{singleton:!0});function Sn(t){let e=!1,n;return()=>(e||(e=!0,n=t()),n)}const Io=Sn(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),So=W(([{scrollBy:t,scrollTop:e,deviation:n,scrollingInProgress:o},{isScrolling:r,isAtBottom:s,scrollDirection:i,lastJumpDueToItemResize:l},{listState:u},{beforeUnshiftWith:d,shiftWithOffset:a,sizes:h,gap:w},{log:v},{recalcInProgress:R}])=>{const f=dt(g(u,M(l),vt(([,m,p,T],[{items:b,totalCount:c,bottom:I,offsetBottom:E},V])=>{const B=I+E;let k=0;return p===c&&m.length>0&&b.length>0&&(b[0].originalIndex===0&&m[0].originalIndex===0||(k=B-T,k!==0&&(k+=V))),[k,b,c,B]},[0,[],0,0]),P(([m])=>m!==0),M(e,i,o,s,v,R),P(([,m,p,T,,,b])=>!b&&!T&&m!==0&&p===Wt),y(([[m],,,,,p])=>(p("Upward scrolling compensation",{amount:m},mt.DEBUG),m))));function S(m){m>0?($(t,{top:-m,behavior:"auto"}),$(n,0)):($(n,0),$(t,{top:-m,behavior:"auto"}))}return j(g(f,M(n,r)),([m,p,T])=>{T&&Io()?$(n,p-m):S(-m)}),j(g(nt(it(r,!1),n,R),P(([m,p,T])=>!m&&!T&&p!==0),y(([m,p])=>p),Ot(1)),S),H(g(a,y(m=>({top:-m}))),t),j(g(d,M(h,w),y(([m,{lastSize:p,groupIndices:T,sizeTree:b},c])=>{function I(E){return E*(p+c)}if(T.length===0)return I(m);{let E=0;const V=Nt(b,0);let B=0,k=0;for(;B<m;){B++,E+=V;let z=T.length===k+1?1/0:T[k+1]-T[k]-1;B+z>m&&(E-=V,z=m-B+1),B+=z,E+=I(z),k++}return E}})),m=>{$(n,m),requestAnimationFrame(()=>{$(t,{top:m}),requestAnimationFrame(()=>{$(n,0),$(R,!1)})})}),{deviation:n}},q(lt,jt,kt,Ct,bt,Te)),xo=W(([{didMount:t},{scrollTo:e},{listState:n}])=>{const o=C(0);return j(g(t,M(o),P(([,r])=>r!==0),y(([,r])=>({top:r}))),r=>{zt(g(n,At(1),P(s=>s.items.length>1)),()=>{requestAnimationFrame(()=>{$(e,r)})})}),{initialScrollTop:o}},q(Ht,lt,kt),{singleton:!0}),wo=W(([{viewportHeight:t},{totalListHeight:e}])=>{const n=C(!1),o=it(g(nt(n,t,e),P(([r])=>r),y(([,r,s])=>Math.max(0,r-s)),Ot(0),K()),0);return{alignToBottom:n,paddingTopAddition:o}},q(lt,In),{singleton:!0}),xn=W(([{scrollTo:t,scrollContainerState:e}])=>{const n=F(),o=F(),r=F(),s=C(!1),i=C(void 0);return H(g(nt(n,o),y(([{viewportHeight:l,scrollTop:u,scrollHeight:d},{offsetTop:a}])=>({scrollTop:Math.max(0,u-a),scrollHeight:d,viewportHeight:l}))),e),H(g(t,M(o),y(([l,{offsetTop:u}])=>({...l,top:l.top+u}))),r),{useWindowScroll:s,customScrollParent:i,windowScrollContainerState:n,windowViewportRect:o,windowScrollTo:r}},q(lt)),To=({itemTop:t,itemBottom:e,viewportTop:n,viewportBottom:o,locationParams:{behavior:r,align:s,...i}})=>t<n?{...i,behavior:r,align:s??"start"}:e>o?{...i,behavior:r,align:s??"end"}:null,vo=W(([{sizes:t,totalCount:e,gap:n},{scrollTop:o,viewportHeight:r,headerHeight:s,fixedHeaderHeight:i,fixedFooterHeight:l,scrollingInProgress:u},{scrollToIndex:d}])=>{const a=F();return H(g(a,M(t,r,e,s,i,l,o),M(n),y(([[h,w,v,R,f,S,m,p],T])=>{const{done:b,behavior:c,align:I,calculateViewLocation:E=To,...V}=h,B=an(h,w,R-1),k=Dt(B,w.offsetTree,T)+f+S,z=k+wt(w.sizeTree,B)[1],D=p+S,N=p+v-m,L=E({itemTop:k,itemBottom:z,viewportTop:D,viewportBottom:N,locationParams:{behavior:c,align:I,...V}});return L?b&&zt(g(u,P(G=>G===!1),At(It(u)?1:2)),b):b&&b(),L}),P(h=>h!==null)),d),{scrollIntoView:a}},q(Ct,lt,Ut,kt,bt),{singleton:!0}),Co=W(([{sizes:t,sizeRanges:e},{scrollTop:n},{initialTopMostItemIndex:o},{didMount:r}])=>{const s=F(),i=C(void 0);return j(g(s,M(t,n)),([l,u,d])=>{const a=no(u.sizeTree);l({ranges:a,scrollTop:d})}),H(g(i,P(re),y(Eo)),o),H(g(r,M(i),P(([,l])=>l!==void 0),K(),y(([,l])=>l.ranges)),e),{getState:s,restoreStateFrom:i}},q(Ct,lt,le,Ht));function Eo(t){return{offset:t.scrollTop,index:0,align:"start"}}const yo=W(([t,e,n,o,r,s,i,l,u,d])=>({...t,...e,...n,...o,...r,...s,...i,...l,...u,...d}),q(Ce,ho,Ht,gn,In,xo,wo,xn,vo,bt)),Ro=W(([{totalCount:t,sizeRanges:e,fixedItemSize:n,defaultItemSize:o,trackItemSizes:r,itemSize:s,data:i,firstItemIndex:l,groupIndices:u,statefulTotalCount:d,gap:a,sizes:h},{initialTopMostItemIndex:w,scrolledToInitialItem:v},R,f,S,{listState:m,topItemsIndexes:p,...T},{scrollToIndex:b},c,{topItemCount:I},{groupCounts:E},V])=>(H(T.rangeChanged,V.scrollSeekRangeChanged),H(g(V.windowViewportRect,y(B=>B.visibleHeight)),R.viewportHeight),{totalCount:t,data:i,firstItemIndex:l,sizeRanges:e,initialTopMostItemIndex:w,scrolledToInitialItem:v,topItemsIndexes:p,topItemCount:I,groupCounts:E,fixedItemHeight:n,defaultItemHeight:o,gap:a,...S,statefulTotalCount:d,listState:m,scrollToIndex:b,trackItemSizes:r,itemSize:s,groupIndices:u,...T,...V,...R,sizes:h,...f}),q(Ct,le,lt,Co,fo,kt,Ut,So,go,pn,yo)),fe="-webkit-sticky",De="sticky",wn=Sn(()=>{if(typeof document>"u")return De;const t=document.createElement("div");return t.style.position=fe,t.style.position===fe?fe:De});function Tn(t,e){const n=x.useRef(null),o=x.useCallback(l=>{if(l===null||!l.offsetParent)return;const u=l.getBoundingClientRect(),d=u.width;let a,h;if(e){const w=e.getBoundingClientRect(),v=u.top-w.top;a=w.height-Math.max(0,v),h=v+e.scrollTop}else a=window.innerHeight-Math.max(0,u.top),h=u.top+window.pageYOffset;n.current={offsetTop:h,visibleHeight:a,visibleWidth:d},t(n.current)},[t,e]),{callbackRef:r,ref:s}=we(o),i=x.useCallback(()=>{o(s.current)},[o,s]);return x.useEffect(()=>{if(e){e.addEventListener("scroll",i);const l=new ResizeObserver(i);return l.observe(e),()=>{e.removeEventListener("scroll",i),l.unobserve(e)}}else return window.addEventListener("scroll",i),window.addEventListener("resize",i),()=>{window.removeEventListener("scroll",i),window.removeEventListener("resize",i)}},[i,e]),r}const vn=x.createContext(void 0),Cn=x.createContext(void 0);function En(t){return t}const bo=W(()=>{const t=C(u=>`Item ${u}`),e=C(null),n=C(u=>`Group ${u}`),o=C({}),r=C(En),s=C("div"),i=C(Gt),l=(u,d=null)=>it(g(o,y(a=>a[u]),K()),d);return{context:e,itemContent:t,groupContent:n,components:o,computeItemKey:r,headerFooterTag:s,scrollerRef:i,FooterComponent:l("Footer"),HeaderComponent:l("Header"),TopItemListComponent:l("TopItemList"),ListComponent:l("List","div"),ItemComponent:l("Item","div"),GroupComponent:l("Group","div"),ScrollerComponent:l("Scroller","div"),EmptyPlaceholder:l("EmptyPlaceholder"),ScrollSeekPlaceholder:l("ScrollSeekPlaceholder")}}),Ho=W(([t,e])=>({...t,...e}),q(Ro,bo)),Oo=({height:t})=>x.createElement("div",{style:{height:t}}),Bo={position:wn(),zIndex:1,overflowAnchor:"none"},zo={overflowAnchor:"none"},We=x.memo(function({showTopList:e=!1}){const n=A("listState"),o=St("sizeRanges"),r=A("useWindowScroll"),s=A("customScrollParent"),i=St("windowScrollContainerState"),l=St("scrollContainerState"),u=s||r?i:l,d=A("itemContent"),a=A("context"),h=A("groupContent"),w=A("trackItemSizes"),v=A("itemSize"),R=A("log"),f=St("gap"),{callbackRef:S}=Wn(o,v,w,e?Gt:u,R,f,s),[m,p]=x.useState(0);Ee("deviation",L=>{m!==L&&p(L)});const T=A("EmptyPlaceholder"),b=A("ScrollSeekPlaceholder")||Oo,c=A("ListComponent"),I=A("ItemComponent"),E=A("GroupComponent"),V=A("computeItemKey"),B=A("isSeeking"),k=A("groupIndices").length>0,z=A("paddingTopAddition"),D=A("scrolledToInitialItem"),N=e?{}:{boxSizing:"border-box",paddingTop:n.offsetTop+z,paddingBottom:n.offsetBottom,marginTop:m,...D?{}:{visibility:"hidden"}};return!e&&n.totalCount===0&&T?x.createElement(T,at(T,a)):x.createElement(c,{...at(c,a),ref:S,style:N,"data-test-id":e?"virtuoso-top-item-list":"virtuoso-item-list"},(e?n.topItems:n.items).map(L=>{const G=L.originalIndex,Z=V(G+n.firstItemIndex,L.data,a);return B?x.createElement(b,{...at(b,a),key:Z,index:L.index,height:L.size,type:L.type||"item",...L.type==="group"?{}:{groupIndex:L.groupIndex}}):L.type==="group"?x.createElement(E,{...at(E,a),key:Z,"data-index":G,"data-known-size":L.size,"data-item-index":L.index,style:Bo},h(L.index,a)):x.createElement(I,{...at(I,a),key:Z,"data-index":G,"data-known-size":L.size,"data-item-index":L.index,"data-item-group-index":L.groupIndex,item:L.data,style:zo},k?d(L.index,L.groupIndex,L.data,a):d(L.index,L.data,a))}))}),Lo={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},ce={width:"100%",height:"100%",position:"absolute",top:0},ko={width:"100%",position:wn(),top:0,zIndex:1};function at(t,e){if(typeof t!="string")return{context:e}}const Vo=x.memo(function(){const e=A("HeaderComponent"),n=St("headerHeight"),o=A("headerFooterTag"),r=Lt(i=>n(yt(i,"height"))),s=A("context");return e?x.createElement(o,{ref:r},x.createElement(e,at(e,s))):null}),Po=x.memo(function(){const e=A("FooterComponent"),n=St("footerHeight"),o=A("headerFooterTag"),r=Lt(i=>n(yt(i,"height"))),s=A("context");return e?x.createElement(o,{ref:r},x.createElement(e,at(e,s))):null});function yn({usePublisher:t,useEmitter:e,useEmitterValue:n}){return x.memo(function({style:s,children:i,...l}){const u=t("scrollContainerState"),d=n("ScrollerComponent"),a=t("smoothScrollTargetReached"),h=n("scrollerRef"),w=n("context"),{scrollerRef:v,scrollByCallback:R,scrollToCallback:f}=nn(u,a,d,h);return e("scrollTo",f),e("scrollBy",R),x.createElement(d,{ref:v,style:{...Lo,...s},"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0,...l,...at(d,w)},i)})}function Rn({usePublisher:t,useEmitter:e,useEmitterValue:n}){return x.memo(function({style:s,children:i,...l}){const u=t("windowScrollContainerState"),d=n("ScrollerComponent"),a=t("smoothScrollTargetReached"),h=n("totalListHeight"),w=n("deviation"),v=n("customScrollParent"),R=n("context"),{scrollerRef:f,scrollByCallback:S,scrollToCallback:m}=nn(u,a,d,Gt,v);return Fn(()=>(f.current=v||window,()=>{f.current=null}),[f,v]),e("windowScrollTo",m),e("scrollBy",S),x.createElement(d,{style:{position:"relative",...s,...h!==0?{height:h+w}:{}},"data-virtuoso-scroller":!0,...l,...at(d,R)},i)})}const Go=({children:t})=>{const e=x.useContext(vn),n=St("viewportHeight"),o=St("fixedItemHeight"),r=Lt(Je(n,s=>yt(s,"height")));return x.useEffect(()=>{e&&(n(e.viewportHeight),o(e.itemHeight))},[e,n,o]),x.createElement("div",{style:ce,ref:r,"data-viewport-type":"element"},t)},_o=({children:t})=>{const e=x.useContext(vn),n=St("windowViewportRect"),o=St("fixedItemHeight"),r=A("customScrollParent"),s=Tn(n,r);return x.useEffect(()=>{e&&(o(e.itemHeight),n({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:100}))},[e,n,o]),x.createElement("div",{ref:s,style:ce,"data-viewport-type":"window"},t)},Mo=({children:t})=>{const e=A("TopItemListComponent"),n=A("headerHeight"),o={...ko,marginTop:`${n}px`},r=A("context");return x.createElement(e||"div",{style:o,context:r},t)},Ao=x.memo(function(e){const n=A("useWindowScroll"),o=A("topItemsIndexes").length>0,r=A("customScrollParent"),s=r||n?Do:No,i=r||n?_o:Go;return x.createElement(s,{...e},o&&x.createElement(Mo,null,x.createElement(We,{showTopList:!0})),x.createElement(i,null,x.createElement(Vo,null),x.createElement(We,null),x.createElement(Po,null)))}),{Component:Fo,usePublisher:St,useEmitterValue:A,useEmitter:Ee}=tn(Ho,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},Ao),No=yn({usePublisher:St,useEmitterValue:A,useEmitter:Ee}),Do=Rn({usePublisher:St,useEmitterValue:A,useEmitter:Ee}),ir=Fo,$e={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Wo={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},{round:Ue,ceil:je,floor:ee,min:de,max:Mt}=Math;function $o(t){return{...Wo,items:t}}function me(t,e,n){return Array.from({length:e-t+1}).map((o,r)=>({index:r+t,data:n==null?void 0:n[r+t]}))}function Uo(t,e){return t&&t.column===e.column&&t.row===e.row}function Ke(t,e){return t&&t.width===e.width&&t.height===e.height}const jo=W(([{overscan:t,visibleRange:e,listBoundary:n},{scrollTop:o,viewportHeight:r,scrollBy:s,scrollTo:i,smoothScrollTargetReached:l,scrollContainerState:u,footerHeight:d,headerHeight:a},h,w,{propsReady:v,didMount:R},{windowViewportRect:f,windowScrollTo:S,useWindowScroll:m,customScrollParent:p,windowScrollContainerState:T},b])=>{const c=C(0),I=C(0),E=C($e),V=C({height:0,width:0}),B=C({height:0,width:0}),k=F(),z=F(),D=C(0),N=C(void 0),L=C({row:0,column:0});H(g(R,M(I,N),P(([O,Q])=>O&&Q!==0),y(([,O,Q])=>({items:me(0,O-1,Q),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}))),E),H(g(nt(_(c),e,_(L,Uo),_(B,Ke),_(V,Ke),N),y(([O,[Q,tt],ct,ut,ot,rt])=>{const{row:et,column:gt}=ct,{height:st,width:Y}=ut,{width:ye}=ot;if(O===0||ye===0)return $e;if(Y===0)return $o(me(0,0,rt));const Kt=bn(ye,Y,gt);let ue=Kt*ee((Q+et)/(st+et)),qt=Kt*je((tt+et)/(st+et))-1;qt=de(O-1,Mt(qt,Kt-1)),ue=de(qt,Mt(0,ue));const Re=me(ue,qt,rt),{top:be,bottom:He}=qe(ot,ct,ut,Re),Oe=je(O/Kt),On=Oe*st+(Oe-1)*et-He;return{items:Re,offsetTop:be,offsetBottom:On,top:be,bottom:He,itemHeight:st,itemWidth:Y}})),E),H(g(N,P(re),y(O=>O.length)),c),H(g(V,y(({height:O})=>O)),r),H(g(nt(V,B,E,L),y(([O,Q,{items:tt},ct])=>{const{top:ut,bottom:ot}=qe(O,ct,Q,tt);return[ut,ot]}),K($t)),n);const G=C(!1);H(g(o,M(G),y(([O,Q])=>Q||O!==0)),G);const Z=dt(g(_(E),P(({items:O})=>O.length>0),M(c,G),P(([{items:O},Q,tt])=>tt&&O[O.length-1].index===Q-1),y(([,O])=>O-1),K())),Tt=dt(g(_(E),P(({items:O})=>O.length>0&&O[0].index===0),Et(0),K())),pt=dt(g(_(E),P(({items:O})=>O.length>0),y(({items:O})=>({startIndex:O[0].index,endIndex:O[O.length-1].index})),K(hn)));H(pt,w.scrollSeekRangeChanged),H(g(k,M(V,B,c,L),y(([O,Q,tt,ct,ut])=>{const ot=dn(O),{align:rt,behavior:et,offset:gt}=ot;let st=ot.index;st==="LAST"&&(st=ct-1),st=Mt(0,st,de(ct-1,st));let Y=Se(Q,ut,tt,st);return rt==="end"?Y=Ue(Y-Q.height+tt.height):rt==="center"&&(Y=Ue(Y-Q.height/2+tt.height/2)),gt&&(Y+=gt),{top:Y,behavior:et}})),i);const ht=it(g(E,y(O=>O.offsetBottom+O.bottom)),0);return H(g(f,y(O=>({width:O.visibleWidth,height:O.visibleHeight}))),V),{data:N,totalCount:c,viewportDimensions:V,itemDimensions:B,scrollTop:o,scrollHeight:z,overscan:t,scrollBy:s,scrollTo:i,scrollToIndex:k,smoothScrollTargetReached:l,windowViewportRect:f,windowScrollTo:S,useWindowScroll:m,customScrollParent:p,windowScrollContainerState:T,deviation:D,scrollContainerState:u,footerHeight:d,headerHeight:a,initialItemCount:I,gap:L,...w,gridState:E,totalListHeight:ht,...h,startReached:Tt,endReached:Z,rangeChanged:pt,propsReady:v,...b}},q(Ce,lt,jt,gn,Ht,xn,bt));function qe(t,e,n,o){const{height:r}=n;if(r===void 0||o.length===0)return{top:0,bottom:0};const s=Se(t,e,n,o[0].index),i=Se(t,e,n,o[o.length-1].index)+r;return{top:s,bottom:i}}function Se(t,e,n,o){const r=bn(t.width,n.width,e.column),s=ee(o/r),i=s*n.height+Mt(0,s-1)*e.row;return i>0?i+e.row:i}function bn(t,e,n){return Mt(1,ee((t+n)/(ee(e)+n)))}const Ko=W(()=>{const t=C(d=>`Item ${d}`),e=C({}),n=C(null),o=C("virtuoso-grid-item"),r=C("virtuoso-grid-list"),s=C(En),i=C("div"),l=C(Gt),u=(d,a=null)=>it(g(e,y(h=>h[d]),K()),a);return{context:n,itemContent:t,components:e,computeItemKey:s,itemClassName:o,listClassName:r,headerFooterTag:i,scrollerRef:l,FooterComponent:u("Footer"),HeaderComponent:u("Header"),ListComponent:u("List","div"),ItemComponent:u("Item","div"),ScrollerComponent:u("Scroller","div"),ScrollSeekPlaceholder:u("ScrollSeekPlaceholder","div")}}),qo=W(([t,e])=>({...t,...e}),q(jo,Ko)),Yo=x.memo(function(){const e=J("gridState"),n=J("listClassName"),o=J("itemClassName"),r=J("itemContent"),s=J("computeItemKey"),i=J("isSeeking"),l=xt("scrollHeight"),u=J("ItemComponent"),d=J("ListComponent"),a=J("ScrollSeekPlaceholder"),h=J("context"),w=xt("itemDimensions"),v=xt("gap"),R=J("log"),f=Lt(S=>{const m=S.parentElement.parentElement.scrollHeight;l(m);const p=S.firstChild;p&&w(p.getBoundingClientRect()),v({row:Ye("row-gap",getComputedStyle(S).rowGap,R),column:Ye("column-gap",getComputedStyle(S).columnGap,R)})});return x.createElement(d,{ref:f,className:n,...at(d,h),style:{paddingTop:e.offsetTop,paddingBottom:e.offsetBottom},"data-test-id":"virtuoso-item-list"},e.items.map(S=>{const m=s(S.index,S.data,h);return i?x.createElement(a,{key:m,...at(a,h),index:S.index,height:e.itemHeight,width:e.itemWidth}):x.createElement(u,{...at(u,h),className:o,"data-index":S.index,key:m},r(S.index,S.data,h))}))}),Zo=x.memo(function(){const e=J("HeaderComponent"),n=xt("headerHeight"),o=J("headerFooterTag"),r=Lt(i=>n(yt(i,"height"))),s=J("context");return e?x.createElement(o,{ref:r},x.createElement(e,at(e,s))):null}),Jo=x.memo(function(){const e=J("FooterComponent"),n=xt("footerHeight"),o=J("headerFooterTag"),r=Lt(i=>n(yt(i,"height"))),s=J("context");return e?x.createElement(o,{ref:r},x.createElement(e,at(e,s))):null}),Qo=({children:t})=>{const e=x.useContext(Cn),n=xt("itemDimensions"),o=xt("viewportDimensions"),r=Lt(s=>{o(s.getBoundingClientRect())});return x.useEffect(()=>{e&&(o({height:e.viewportHeight,width:e.viewportWidth}),n({height:e.itemHeight,width:e.itemWidth}))},[e,o,n]),x.createElement("div",{style:ce,ref:r},t)},Xo=({children:t})=>{const e=x.useContext(Cn),n=xt("windowViewportRect"),o=xt("itemDimensions"),r=J("customScrollParent"),s=Tn(n,r);return x.useEffect(()=>{e&&(o({height:e.itemHeight,width:e.itemWidth}),n({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:e.viewportWidth}))},[e,n,o]),x.createElement("div",{ref:s,style:ce},t)},tr=x.memo(function({...e}){const n=J("useWindowScroll"),o=J("customScrollParent"),r=o||n?or:nr,s=o||n?Xo:Qo;return x.createElement(r,{...e},x.createElement(s,null,x.createElement(Zo,null),x.createElement(Yo,null),x.createElement(Jo,null)))}),{Component:er,usePublisher:xt,useEmitterValue:J,useEmitter:Hn}=tn(qo,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange"}},tr),nr=yn({usePublisher:xt,useEmitterValue:J,useEmitter:Hn}),or=Rn({usePublisher:xt,useEmitterValue:J,useEmitter:Hn});function Ye(t,e,n){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&n(`${t} was not resolved to pixel value correctly`,e,mt.WARN),e==="normal"?0:parseInt(e??"0",10)}const lr=er;export{ir as V,lr as a};
