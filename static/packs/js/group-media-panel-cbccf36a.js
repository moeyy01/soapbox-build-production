import{c as E,r as c,p as I,k4 as A,Y as G,k5 as g,_ as t,aE as y,K as m,G as h,C as p}from"../index-961d4ed1.js";import{W as k}from"./widget-a1deeca4.js";import{M as D}from"./media-item-14a28054.js";import"./arrow-right-b75290c7.js";import"./volume-08f8a8f1.js";const L=u=>{var l;let{group:e}=u;const a=E(),[f,o]=c.useState(!0),d=!!((l=e==null?void 0:e.relationship)!=null&&l.member),n=e==null?void 0:e.locked,M=I(s=>e?A(s,e==null?void 0:e.id):G()),_=s=>{if(s.type==="video")a(p("VIDEO",{media:s,status:s.status}));else{const i=s.getIn(["status","media_attachments"]),r=i.findIndex(x=>x.id===s.id);a(p("MEDIA",{media:i,index:r,status:s.status,account:s.account}))}};c.useEffect(()=>{o(!0),e&&!e.deleted_at&&(d||!n)&&a(g(e.id)).then(()=>o(!1)).catch(()=>{})},[e==null?void 0:e.id,d,n]);const v=()=>{const s=M.slice(0,9);return s.isEmpty()?t(h,{size:"sm",theme:"muted"},void 0,t(m,{id:"media_panel.empty_message",defaultMessage:"No media found."})):t("div",{className:"grid grid-cols-3 gap-1"},void 0,s.map((i,r)=>t(D,{attachment:i,onOpenMedia:_},`${i.getIn(["status","id"])}+${i.id}`)))};return n&&!d||e!=null&&e.deleted_at?null:t(k,{title:t(m,{id:"media_panel.title",defaultMessage:"Media"})},void 0,e&&t("div",{className:"w-full"},void 0,f?t(y,{}):v()))};export{L as default};
