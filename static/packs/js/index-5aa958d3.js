import{c as g,u as l,p as u,r as k,iH as h,_ as e,aE as p,b0 as M,eb as C,cA as y,a$ as S,a2 as _,n as b,a8 as c,G as m,d4 as H,H as R,af as A,C as T,iI as I,iJ as v}from"../index-961d4ed1.js";const i=b({header:{id:"security.headers.tokens",defaultMessage:"Sessions"},revoke:{id:"security.tokens.revoke",defaultMessage:"Revoke"},revokeSessionHeading:{id:"confirmations.revoke_session.heading",defaultMessage:"Revoke current session"},revokeSessionMessage:{id:"confirmations.revoke_session.message",defaultMessage:"You are about to revoke your current session. You will be signed out."},revokeSessionConfirm:{id:"confirmations.revoke_session.confirm",defaultMessage:"Revoke"}}),w=n=>{let{token:a,isCurrent:t}=n;const r=g(),o=l(),s=()=>{r(t?T("CONFIRM",{icon:I,heading:o.formatMessage(i.revokeSessionHeading),message:o.formatMessage(i.revokeSessionMessage),confirm:o.formatMessage(i.revokeSessionConfirm),onConfirm:()=>{r(v(a.id))}}):v(a.id))};return e("div",{className:"rounded-lg bg-gray-100 p-4 dark:bg-primary-800"},void 0,e(c,{space:2},void 0,e(c,{},void 0,e(m,{size:"md",weight:"medium"},void 0,a.app_name),a.valid_until&&e(m,{size:"sm",theme:"muted"},void 0,e(H,{value:a.valid_until,hour12:!0,year:"numeric",month:"short",day:"2-digit",hour:"numeric",minute:"2-digit"}))),e(R,{justifyContent:"end"},void 0,e(A,{theme:t?"danger":"primary",onClick:s},void 0,o.formatMessage(i.revoke)))))},x=()=>{const n=g(),a=l(),t=u(s=>s.security.get("tokens").reverse()),r=u(s=>{const d=s.auth.tokens.valueSeq().find(f=>f.me===s.auth.me);return d==null?void 0:d.id});k.useEffect(()=>{n(h())},[]);const o=t?e("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2"},void 0,t.map(s=>e(w,{token:s,isCurrent:s.id===r},s.id))):e(p,{});return e(_,{label:a.formatMessage(i.header),transparent:!0,withHeader:!1},void 0,e(M,{variant:"rounded"},void 0,e(C,{backHref:"/settings"},void 0,e(y,{title:a.formatMessage(i.header)})),e(S,{},void 0,o)))};export{x as default};
