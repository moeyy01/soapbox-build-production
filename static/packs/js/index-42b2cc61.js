import{c as D,u as S,r as o,aN as v,p as R,Z as k,aO as x,_ as t,aP as c,aF as _,aQ as A,a2 as f,aR as C,n as I}from"../index-961d4ed1.js";import{P}from"./pull-to-refresh-b67e1521.js";import{T as $}from"./thread-0ef56bd7.js";import"./scrollable-list-74021d3b.js";import"./index-c72bc579.js";import"./load-more-1869fbc1.js";import"./pending-status-d95ac051.js";import"./poll-preview-bd47b324.js";import"./noop-33ff36b4.js";import"./status-container-8c0c48ff.js";const m=I({title:{id:"status.title",defaultMessage:"Post Details"},titleDirect:{id:"status.title_direct",defaultMessage:"Direct message"},deleteConfirm:{id:"confirmations.delete.confirm",defaultMessage:"Delete"},deleteHeading:{id:"confirmations.delete.heading",defaultMessage:"Delete post"},deleteMessage:{id:"confirmations.delete.message",defaultMessage:"Are you sure you want to delete this post?"},redraftConfirm:{id:"confirmations.redraft.confirm",defaultMessage:"Delete & redraft"},redraftHeading:{id:"confirmations.redraft.heading",defaultMessage:"Delete & redraft"},redraftMessage:{id:"confirmations.redraft.message",defaultMessage:"Are you sure you want to delete this post and re-draft it? Favorites and reposts will be lost, and replies to the original post will be orphaned."},blockConfirm:{id:"confirmations.block.confirm",defaultMessage:"Block"},revealAll:{id:"status.show_more_all",defaultMessage:"Show more for all"},hideAll:{id:"status.show_less_all",defaultMessage:"Show less for all"},detailedStatus:{id:"status.detailed_status",defaultMessage:"Detailed conversation view"},replyConfirm:{id:"confirmations.reply.confirm",defaultMessage:"Reply"},replyMessage:{id:"confirmations.reply.message",defaultMessage:"Replying now will overwrite the message you are currently composing. Are you sure you want to proceed?"},blockAndReport:{id:"confirmations.block.block_and_report",defaultMessage:"Block & Report"}}),Q=s=>{const l=D(),g=S(),p=o.useCallback(v(),[]),e=R(a=>p(a,{id:s.params.statusId})),[h,n]=o.useState(!!e),[r,d]=o.useState(),u=async()=>{const{params:a}=s,{statusId:i}=a,{next:b}=await l(C(i));d(b)};o.useEffect(()=>{u().then(()=>{n(!0)}).catch(()=>{n(!0)})},[s.params.statusId]);const M=o.useCallback(k(()=>{r&&e&&l(x(e.id,r)).then(a=>{let{next:i}=a;d(i)}).catch(()=>{})},300,{leading:!0}),[r,e]),y=()=>u();if(e!=null&&e.event)return t(c,{to:`/@${e.getIn(["account","acct"])}/events/${e.id}`});if(!e&&h)return t(_,{});if(!e)return t(f,{},void 0,t(A,{}));if(e.group&&typeof e.group=="object"&&e.group.slug&&!s.params.groupSlug)return t(c,{to:`/group/${e.group.slug}/posts/${s.params.statusId}`});const w=()=>e.visibility==="direct"?m.titleDirect:m.title;return t(f,{label:g.formatMessage(w())},void 0,t(P,{onRefresh:y},void 0,t($,{status:e,next:r,handleLoadMore:M})))};export{Q as default};
