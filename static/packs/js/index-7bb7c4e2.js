import{bn as f,cG as M,cK as y,cL as v,u as m,c as _,_ as t,ae as b,ab as C,H as p,n as g,z as S,i1 as u,C as w,i2 as x,p as c,a1 as r,b3 as I,cM as R,bO as A,c2 as L,R as E,ay as P,Z as N,i3 as $,r as H,i4 as k,a2 as z,K}from"../index-961d4ed1.js";import{S as O}from"./scrollable-list-74021d3b.js";import{P as T}from"./poll-preview-bd47b324.js";import"./index-c72bc579.js";import"./load-more-1869fbc1.js";import"./noop-33ff36b4.js";const j=(n,s)=>{var o;const i=n.me,e=(o=n.entities[f.ACCOUNTS])==null?void 0:o.store[i],d=M({account:e,content:s.text.replace(new RegExp(`
`,"g"),"<br>"),created_at:s.scheduled_at,id:s.id,in_reply_to_id:s.in_reply_to_id,media_attachments:s.media_attachments,poll:s.poll,sensitive:s.sensitive,uri:`/scheduled_statuses/${s.id}`,url:`/scheduled_statuses/${s.id}`,visibility:s.visibility});return y(v(d))},l=g({cancel:{id:"scheduled_status.cancel",defaultMessage:"Cancel"},deleteConfirm:{id:"confirmations.scheduled_status_delete.confirm",defaultMessage:"Discard"},deleteHeading:{id:"confirmations.scheduled_status_delete.heading",defaultMessage:"Cancel scheduled post"},deleteMessage:{id:"confirmations.scheduled_status_delete.message",defaultMessage:"Are you sure you want to discard this scheduled post?"}}),q=n=>{let{status:s}=n;const i=m(),e=_(),d=()=>{e((o,a)=>{const h=S(a()).get("deleteModal");e(h?w("CONFIRM",{icon:x,heading:i.formatMessage(l.deleteHeading),message:i.formatMessage(l.deleteMessage),confirm:i.formatMessage(l.deleteConfirm),onConfirm:()=>e(u(s.id))}):u(s.id))})};return t(p,{justifyContent:"end"},void 0,t(b,{title:i.formatMessage(l.cancel),text:i.formatMessage(l.cancel),src:C,onClick:d}))},B=n=>{let{statusId:s,...i}=n;const e=c(o=>{const a=o.scheduled_statuses.get(s);return a?j(o,a):null});if(!e)return null;const d=e.account;return t("div",{className:r("status__wrapper",`status__wrapper-${e.visibility}`,{"status__wrapper-reply":!!e.in_reply_to_id}),tabIndex:0},void 0,t("div",{className:r("status",`status-${e.visibility}`,{"status-reply":!!e.in_reply_to_id}),"data-id":e.id},void 0,t("div",{className:"mb-4"},void 0,t(p,{justifyContent:"between",alignItems:"start"},void 0,t(I,{account:d,timestamp:e.created_at,futureTimestamp:!0,hideActions:!0},d.id))),t(R,{status:e}),t(A,{status:e,collapsable:!0}),e.media_attachments.size>0&&t(L,{media:e.media_attachments,sensitive:e.sensitive}),e.poll&&t(T,{pollId:e.poll}),E.createElement(q,P({status:e},i))))},D=g({heading:{id:"column.scheduled_statuses",defaultMessage:"Scheduled Posts"}}),F=N(n=>{n($())},300,{leading:!0}),Q=()=>{const n=m(),s=_(),i=c(a=>a.status_lists.get("scheduled_statuses").items),e=c(a=>a.status_lists.get("scheduled_statuses").isLoading),d=c(a=>!!a.status_lists.get("scheduled_statuses").next);H.useEffect(()=>{s(k())},[]);const o=t(K,{id:"empty_column.scheduled_statuses",defaultMessage:"You don't have any scheduled statuses yet. When you add one, it will show up here."});return t(z,{label:n.formatMessage(D.heading)},void 0,t(O,{scrollKey:"scheduled_statuses",hasMore:d,isLoading:typeof e=="boolean"?e:!0,onLoadMore:()=>F(s),emptyMessage:o},void 0,i.map(a=>t(B,{statusId:a},a))))};export{Q as default};
