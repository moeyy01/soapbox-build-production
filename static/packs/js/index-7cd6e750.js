import{aU as C,q as F,c as R,f as T,d as U,aV as B,aW as P,r as o,p as n,aX as G,aY as K,aZ as V,a_ as f,_ as s,aE as Y,aF as q,a$ as D,G as H,K as c,b0 as N}from"../index-961d4ed1.js";import{S as W}from"./status-list-e5eaf038.js";import"./scrollable-list-74021d3b.js";import"./index-c72bc579.js";import"./load-more-1869fbc1.js";import"./status-container-8c0c48ff.js";import"./pending-status-d95ac051.js";import"./poll-preview-bd47b324.js";import"./noop-33ff36b4.js";const g=C(),se=h=>{let{params:r,withReplies:a=!1}=h;const b=F(),i=R(),_=T(),y=U(),x=B(),{account:e}=P(r.username,{withRelationship:!0}),[I,d]=o.useState(!e),u=a?`${e==null?void 0:e.id}:with_replies`:e==null?void 0:e.id,S=y.getIn(["account_timeline","shows","pinned"])===!0&&!a,M=n(t=>g(t,{type:`account:${u}`,prefix:"account_timeline"})),A=n(t=>g(t,{type:`account:${e==null?void 0:e.id}:pinned`,prefix:"account_timeline"})),l=n(t=>t.relationships.getIn([e==null?void 0:e.id,"blocked_by"])===!0),v=l&&!_.blockersVisible,p=x.getIn(["extensions","patron","enabled"])===!0,E=n(t=>t.getIn(["timelines",`account:${u}`,"isLoading"])===!0),L=n(t=>t.getIn(["timelines",`account:${u}`,"hasMore"])===!0),k=n(t=>{var m;return(m=t.timelines.get(`account:${u}`))==null?void 0:m.next}),$=(e==null?void 0:e.username)||r.username;o.useEffect(()=>{i(G(r.username,b)).then(()=>d(!1)).catch(()=>d(!1))},[r.username]),o.useEffect(()=>{e&&!a&&i(K(e.id))},[e==null?void 0:e.id,a]),o.useEffect(()=>{e&&p&&i(V(e.url))},[e==null?void 0:e.url,p]),o.useEffect(()=>{e&&i(f(e.id,{withReplies:a}))},[e==null?void 0:e.id,a]);const w=t=>{e&&i(f(e.id,{url:k,maxId:t,withReplies:a}))};return!e&&I?s(Y,{}):e?v?s(N,{},void 0,s(D,{},void 0,s(H,{align:"center"},void 0,l?s(c,{id:"empty_column.account_blocked",defaultMessage:"You are blocked by @{accountUsername}.",values:{accountUsername:$}}):s(c,{id:"empty_column.account_unavailable",defaultMessage:"Profile unavailable"})))):s(W,{scrollKey:"account_timeline",statusIds:M,featuredStatusIds:S?A:void 0,isLoading:E,hasMore:L,onLoadMore:w,emptyMessage:s(c,{id:"empty_column.account_timeline",defaultMessage:"No posts here!"})}):s(q,{nested:!0})};export{se as default};
