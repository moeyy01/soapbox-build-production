var E=Object.defineProperty;var c=(e,a,o)=>a in e?E(e,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[a]=o;var l=(e,a,o)=>(c(e,typeof a!="symbol"?a+"":a,o),o);import{u as m,_ as s,bv as h,n as C,aE as O,R as d,ay as M,g$ as p,hi as T,hj as R,hk as I,hl as _,hm as N,hn as S,ho as u,hp as A,hq as P,hr as y,hs as D,ht as v,hu as g,hv as L,hw as f,hx as b,hy as B,hz as F,hA as V,hB as k,hC as w,hD as U,hE as G,hF as H,hG as Y,hH as x,hI as J,hJ as K,hK as $,hL as z,hM as j,hN as q,hO as Q,hP as W,hQ as Z,hR as X,hS as oo,hT as ao,dI as eo,dF as so,bw as ro}from"../index-961d4ed1.js";import{B as to}from"./modal-root-13757a66.js";const i=C({error:{id:"bundle_modal_error.message",defaultMessage:"Something went wrong while loading this modal."},retry:{id:"bundle_modal_error.retry",defaultMessage:"Try again"},close:{id:"bundle_modal_error.close",defaultMessage:"Close"}}),lo=e=>{let{onRetry:a,onClose:o}=e;const r=m(),t=()=>{a()};return s(h,{title:r.formatMessage(i.error),confirmationAction:o,confirmationText:r.formatMessage(i.close),secondaryAction:t,secondaryText:r.formatMessage(i.retry)})},no=lo,io=()=>s("div",{className:"modal-root__modal error-modal"},void 0,s("div",{className:"error-modal__body"},void 0,s(O,{})),s("div",{className:"error-modal__footer"},void 0,s("div",{},void 0,s("button",{className:"error-modal__nav"})))),Mo=io,Eo={ACCOUNT_MODERATION:T,ACTIONS:R,BIRTHDAYS:I,BOOST:_,COMPARE_HISTORY:N,COMPONENT:S,COMPOSE:u,COMPOSE_EVENT:A,CONFIRM:P,CREATE_GROUP:y,CRYPTO_DONATE:D,DISLIKES:v,EDIT_ANNOUNCEMENT:g,EDIT_FEDERATION:L,EMBED:f,EVENT_MAP:b,EVENT_PARTICIPANTS:B,FAMILIAR_FOLLOWERS:F,FAVOURITES:V,HOTKEYS:k,JOIN_EVENT:w,LANDING_PAGE:U,LIST_ADDER:G,LIST_EDITOR:H,MEDIA:Y,MENTIONS:x,MISSING_DESCRIPTION:J,MUTE:K,POLICY:$,REACTIONS:z,REBLOGS:j,REPLY_MENTIONS:q,REPORT:Q,UNAUTHORIZED:W,VERIFY_SMS:Z,VIDEO:X};class co extends d.PureComponent{constructor(){super(...arguments);l(this,"renderLoading",o=>()=>["MEDIA","VIDEO","BOOST","CONFIRM","ACTIONS"].includes(o)?null:s(Mo,{}));l(this,"renderError",o=>d.createElement(no,M({},o,{onClose:this.onClickClose})));l(this,"onClickClose",o=>{const{onClose:r,type:t}=this.props;r(t)})}getSnapshotBeforeUpdate(){return{visible:!!this.props.type}}componentDidUpdate(o,r,t){let{visible:n}=t;n?document.body.classList.add("with-modals"):document.body.classList.remove("with-modals")}render(){const{type:o,props:r}=this.props,t=!!o;return s(to,{onClose:this.onClickClose,type:o},void 0,t&&s(p,{fetchComponent:Eo[o],loading:this.renderLoading(o),error:this.renderError,renderDelay:200},void 0,n=>d.createElement(n,M({},r,{onClose:this.onClickClose}))))}}const mo=e=>{const a=e.modals.last({modalType:null,modalProps:{}});return{type:a.modalType,props:a.modalProps}},ho=e=>({onClose(a){switch(a){case"COMPOSE":e(so());break;case"COMPOSE_EVENT":e(eo());break;case"REPORT":e(ao());break}e(ro(a))}}),To=oo(mo,ho)(co);export{To as default};
