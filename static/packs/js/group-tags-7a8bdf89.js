import{v as w}from"./hash-746ab8b6.js";import{jJ as G,bn as T,c as x,u as k,jN as C,_ as s,H as y,f1 as f,aI as v,jS as R,dh as I,N as L,a8 as S,G as l,c_ as j,n as q,jT as _,bq as P,c7 as N,h4 as A,dD as E,K as F}from"../index-961d4ed1.js";import{u as U}from"./useGroupTags-ee20c38f.js";import{S as O}from"./scrollable-list-74021d3b.js";import{P as H}from"./placeholder-account-9a0f17de.js";import"./index-c72bc579.js";import"./load-more-1869fbc1.js";function $(r,a){const{updateEntity:e,...c}=G([T.GROUP_TAGS,r,a],{patch:`/api/v1/groups/${r}/tags/${a}`});return{updateGroupTag:e,...c}}const b="/packs/assets/pin-filled-c783b6dd.svg",i=q({hideTag:{id:"group.tags.hide",defaultMessage:"Hide topic"},showTag:{id:"group.tags.show",defaultMessage:"Show topic"},total:{id:"group.tags.total",defaultMessage:"Total Posts"},pinTag:{id:"group.tags.pin",defaultMessage:"Pin topic"},unpinTag:{id:"group.tags.unpin",defaultMessage:"Unpin topic"},pinSuccess:{id:"group.tags.pin.success",defaultMessage:"Pinned!"},unpinSuccess:{id:"group.tags.unpin.success",defaultMessage:"Unpinned!"},visibleSuccess:{id:"group.tags.visible.success",defaultMessage:"Topic marked as visible"},hiddenSuccess:{id:"group.tags.hidden.success",defaultMessage:"Topic marked as hidden"}}),z=r=>{var o;const{group:a,tag:e,isPinnable:c}=r,d=x(),t=k(),{updateGroupTag:p}=$(a.id,e.id),n=((o=a.relationship)==null?void 0:o.role)===C.OWNER,u=()=>{const g=e.visible;p({group_tag_type:g?"hidden":"normal"},{onSuccess(){const M={...e,visible:!e.visible,pinned:g?!1:e.pinned};d(_([M],T.GROUP_TAGS)),P.success(M.visible?t.formatMessage(i.visibleSuccess):t.formatMessage(i.hiddenSuccess))}})},m=()=>{p({group_tag_type:e.pinned?"normal":"pinned"},{onSuccess(){const g={...e,pinned:!e.pinned};d(_([g],T.GROUP_TAGS)),P.success(g.pinned?t.formatMessage(i.pinSuccess):t.formatMessage(i.unpinSuccess))}})},h=()=>{if(!n&&e.pinned)return s(N,{src:b,className:"h-5 w-5 text-gray-600","data-testid":"pin-icon"});if(!n)return null;if(c)return s(f,{text:e.pinned?t.formatMessage(i.unpinTag):t.formatMessage(i.pinTag)},void 0,s(v,{onClick:m,theme:"transparent",src:e.pinned?b:A,iconClassName:"h-5 w-5 text-primary-500 dark:text-accent-blue","data-testid":"pin-icon"}));if(!c&&e.pinned)return s(f,{text:t.formatMessage(i.unpinTag)},void 0,s(v,{onClick:m,theme:"transparent",src:b,iconClassName:"h-5 w-5 text-primary-500 dark:text-accent-blue"}))};return s(y,{alignItems:"center",justifyContent:"between","data-testid":"group-tag-list-item"},void 0,s(L,{to:`/group/${a.slug}/tag/${e.id}`,className:"group grow"},void 0,s(S,{},void 0,s(l,{weight:"bold",theme:e.visible||!n?"default":"subtle",className:"group-hover:underline","data-testid":"group-tag-name"},void 0,"#",e.name),s(l,{size:"sm",theme:e.visible||!n?"muted":"subtle"},void 0,t.formatMessage(i.total),":"," ",s(l,{size:"sm",theme:"inherit",weight:"semibold",tag:"span"},void 0,j(e.uses))))),s(y,{alignItems:"center",space:2},void 0,e.visible?h():null,n?s(f,{text:e.visible?t.formatMessage(i.hideTag):t.formatMessage(i.showTag)},void 0,s(v,{onClick:u,theme:"transparent",src:e.visible?R:I,iconClassName:"h-5 w-5 text-primary-500 dark:text-accent-blue"})):null))},X=r=>{const{groupId:a}=r.params,{group:e,isFetching:c}=E(a),{tags:d,isFetching:t,hasNextPage:p,fetchNextPage:n}=U(a),u=c||t,h=d.filter(o=>o.pinned).length<3;return s(O,{scrollKey:"group-tags",hasMore:p,onLoadMore:n,isLoading:u||!e,showLoading:!e||u&&d.length===0,placeholderComponent:H,placeholderCount:3,className:"divide-y divide-solid divide-gray-300 dark:divide-gray-800",itemClassName:"py-3 last:pb-0",emptyMessage:s(S,{space:4,className:"pt-6",justifyContent:"center",alignItems:"center"},void 0,s("div",{className:"rounded-full bg-gray-200 p-4 dark:bg-gray-800"},void 0,s(N,{src:w,className:"h-6 w-6 text-gray-600"})),s(l,{theme:"muted"},void 0,s(F,{id:"group.tags.empty",defaultMessage:"There are no topics in this group yet."}))),emptyMessageCard:!1},void 0,d.map(o=>s(z,{group:e,isPinnable:h,tag:o},o.id)))};export{X as default};
