import{u as R,q as w,c as L,t as O,dO as S,p as x,ar as F,f as T,r as k,_ as e,a8 as N,G as r,K as t,bv as p,bF as z,bH as D,af as U,n as H,dP as j,bq as q}from"../index-961d4ed1.js";const v=H({close:{id:"lightbox.close",defaultMessage:"Close"},accountPlaceholder:{id:"remote_interaction.account_placeholder",defaultMessage:"Enter your username@domain you want to act from"},userNotFoundError:{id:"remote_interaction.user_not_found_error",defaultMessage:"Couldn't find given user"}}),B=M=>{let{action:i,onClose:l,account:h,ap_id:y}=M;const d=R(),c=w(),I=L(),u=O(),{isOpen:s}=S(),b=x(a=>{var o;return(o=F(a,h))==null?void 0:o.display_name}),f=T(),[m,A]=k.useState(""),C=a=>{A(a.target.value)},n=()=>{l("UNAUTHORIZED")},E=a=>{a.preventDefault(),I(j(y,m)).then(o=>{window.open(o,"_new","noopener,noreferrer"),l("UNAUTHORIZED")}).catch(o=>{o.message==="Couldn't find user"&&q.error(d.formatMessage(v.userNotFoundError))})},g=()=>{c.push("/login"),n()},_=()=>{c.push("/signup"),n()},P=()=>{let a,o;return i==="FOLLOW"?(a=e(t,{id:"remote_interaction.follow_title",defaultMessage:"Follow {user} remotely",values:{user:b}}),o=e(t,{id:"remote_interaction.follow",defaultMessage:"Proceed to follow"})):i==="REPLY"?(a=e(t,{id:"remote_interaction.reply_title",defaultMessage:"Reply to a post remotely"}),o=e(t,{id:"remote_interaction.reply",defaultMessage:"Proceed to reply"})):i==="REBLOG"?(a=e(t,{id:"remote_interaction.reblog_title",defaultMessage:"Reblog a post remotely"}),o=e(t,{id:"remote_interaction.reblog",defaultMessage:"Proceed to repost"})):i==="FAVOURITE"?(a=e(t,{id:"remote_interaction.favourite_title",defaultMessage:"Like a post remotely"}),o=e(t,{id:"remote_interaction.favourite",defaultMessage:"Proceed to like"})):i==="DISLIKE"?(a=e(t,{id:"remote_interaction.dislike_title",defaultMessage:"Dislike a post remotely"}),o=e(t,{id:"remote_interaction.dislike",defaultMessage:"Proceed to dislike"})):i==="POLL_VOTE"?(a=e(t,{id:"remote_interaction.poll_vote_title",defaultMessage:"Vote in a poll remotely"}),o=e(t,{id:"remote_interaction.poll_vote",defaultMessage:"Proceed to vote"})):i==="JOIN"&&(a=e(t,{id:"remote_interaction.event_join_title",defaultMessage:"Join an event remotely"}),o=e(t,{id:"remote_interaction.event_join",defaultMessage:"Proceed to join"})),e(p,{title:a,onClose:n,confirmationAction:g,confirmationText:e(t,{id:"account.login",defaultMessage:"Log in"}),secondaryAction:s?_:void 0,secondaryText:s?e(t,{id:"account.register",defaultMessage:"Sign up"}):void 0},void 0,e("div",{className:"remote-interaction-modal__content"},void 0,e(z,{className:"remote-interaction-modal__fields",onSubmit:E},void 0,e(D,{placeholder:d.formatMessage(v.accountPlaceholder),name:"remote_follow[acct]",value:m,autoCorrect:"off",autoCapitalize:"off",onChange:C,required:!0}),e(U,{type:"submit",theme:"primary"},void 0,o)),e("div",{className:"remote-interaction-modal__divider"},void 0,e(r,{align:"center"},void 0,e(t,{id:"remote_interaction.divider",defaultMessage:"or"}))),s&&e(r,{size:"lg",weight:"medium"},void 0,e(t,{id:"unauthorized_modal.title",defaultMessage:"Sign up for {site_title}",values:{site_title:u.title}}))))};return i&&f.remoteInteractions&&f.federating?P():e(p,{title:e(t,{id:"unauthorized_modal.title",defaultMessage:"Sign up for {site_title}",values:{site_title:u.title}}),onClose:n,confirmationAction:g,confirmationText:e(t,{id:"account.login",defaultMessage:"Log in"}),secondaryAction:s?_:void 0,secondaryText:s?e(t,{id:"account.register",defaultMessage:"Sign up"}):void 0},void 0,e(N,{},void 0,e(r,{},void 0,e(t,{id:"unauthorized_modal.text",defaultMessage:"You need to be logged in to do that."}))))};export{B as default};
