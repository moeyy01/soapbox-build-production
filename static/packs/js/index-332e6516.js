import{r as p,cH as C,_ as e,H as F,p as y,b4 as L,z as A,a8 as f,G as i,c_ as b,K as v,bB as R,b3 as S,a1 as M,gR as z,cC as B,u as D,c as I,ip as H,t as P,f as E,iq as G,a2 as T,n as j,ir as q}from"../index-961d4ed1.js";import{L as O}from"./load-more-1869fbc1.js";const h=t=>{let{name:l,value:r,checked:a,onChange:c,label:n}=t;const o=p.useMemo(()=>`radio-${C()}`,[]);return e(F,{alignItems:"center",space:3},void 0,e("input",{type:"radio",name:l,id:o,value:r,checked:a,onChange:c,className:"h-4 w-4 border-gray-300 text-primary-600 focus:ring-primary-500"}),e("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700"},void 0,n))},K=t=>{var o;let{id:l}=t;const r=y(d=>d.me),{account:a}=L(l),c=y(d=>A(d).get("autoPlayGif"));if(!a)return null;const n=r!==a.id&&((o=a.relationship)==null?void 0:o.followed_by);return e("div",{className:"flex flex-col divide-y divide-gray-200 rounded-lg bg-white text-center shadow dark:divide-primary-700 dark:bg-primary-800"},void 0,e("div",{className:"relative"},void 0,n&&e("div",{className:"absolute left-2.5 top-2.5"},void 0,e(z,{slug:"opaque",title:e(v,{id:"account.follows_you",defaultMessage:"Follows you"})})),e("div",{className:"absolute bottom-2.5 right-2.5"},void 0,e(B,{account:a,small:!0})),e("img",{src:c?a.header:a.header_static,alt:"",className:"h-32 w-full rounded-t-lg object-cover"})),e(f,{space:4,className:"p-3"},void 0,e(S,{account:a,withRelationship:!1}),e(i,{truncate:!0,align:"left",className:M("[&_br]:hidden [&_p:first-child]:inline [&_p:first-child]:truncate [&_p]:hidden"),dangerouslySetInnerHTML:{__html:a.note_emojified||"&nbsp;"}})),e("div",{className:"grid grid-cols-3 gap-1 py-4"},void 0,e(f,{},void 0,e(i,{theme:"primary",size:"md",weight:"medium"},void 0,b(a.statuses_count)),e(i,{theme:"muted",size:"sm"},void 0,e(v,{id:"account.posts",defaultMessage:"Posts"}))),e(f,{},void 0,e(i,{theme:"primary",size:"md",weight:"medium"},void 0,b(a.followers_count)),e(i,{theme:"muted",size:"sm"},void 0,e(v,{id:"account.followers",defaultMessage:"Followers"}))),e(f,{},void 0,e(i,{theme:"primary",size:"md",weight:"medium"},void 0,a.last_status_at?e(R,{theme:"inherit",timestamp:a.last_status_at}):e(v,{id:"account.never_active",defaultMessage:"Never"})),e(i,{theme:"muted",size:"sm"},void 0,e(v,{id:"account.last_status",defaultMessage:"Last active"})))))},g=j({title:{id:"column.directory",defaultMessage:"Browse profiles"},recentlyActive:{id:"directory.recently_active",defaultMessage:"Recently active"},newArrivals:{id:"directory.new_arrivals",defaultMessage:"New arrivals"},local:{id:"directory.local",defaultMessage:"From {domain} only"},federated:{id:"directory.federated",defaultMessage:"From known fediverse"}}),J=()=>{const t=D(),l=I(),{search:r}=H(),a=new URLSearchParams(r),c=P(),n=E(),o=y(s=>s.user_lists.directory.items),d=y(s=>s.user_lists.directory.isLoading),[m,N]=p.useState(a.get("order")||"active"),[u,k]=p.useState(!!a.get("local"));p.useEffect(()=>{l(G({order:m||"active",local:u||!1}))},[m,u]);const w=s=>{N(s.target.value)},_=s=>{k(s.target.value==="1")},x=()=>{l(q({order:m||"active",local:u||!1}))};return e(T,{label:t.formatMessage(g.title)},void 0,e(f,{space:4},void 0,e("div",{className:"grid grid-cols-2 gap-2"},void 0,e("div",{},void 0,e(i,{weight:"medium"},void 0,"Display filter"),e("fieldset",{className:"mt-3"},void 0,e("legend",{className:"sr-only"},void 0,"Display filter"),e("div",{className:"space-y-2"},void 0,e(h,{name:"order",value:"active",label:t.formatMessage(g.recentlyActive),checked:m==="active",onChange:w}),e(h,{name:"order",value:"new",label:t.formatMessage(g.newArrivals),checked:m==="new",onChange:w})))),n.federating&&e("div",{},void 0,e(i,{weight:"medium"},void 0,"Fediverse filter"),e("fieldset",{className:"mt-3"},void 0,e("legend",{className:"sr-only"},void 0,"Fediverse filter"),e("div",{className:"space-y-2"},void 0,e(h,{name:"local",value:"1",label:t.formatMessage(g.local,{domain:c.title}),checked:u,onChange:_}),e(h,{name:"local",value:"0",label:t.formatMessage(g.federated),checked:!u,onChange:_}))))),e("div",{className:M({"grid grid-cols-1 sm:grid-cols-2 gap-2.5":!0,"opacity-30":d})},void 0,o.map(s=>e(K,{id:s},s))),e(O,{onClick:x,disabled:d})))};export{J as default};
