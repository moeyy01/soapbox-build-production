import{cJ as N,p as _,Y as A,_ as e,a1 as R,c9 as L,H as i,c as D,f as T,ba as q,r as H,gP as O,N as C,G as l,cB as E,g5 as U,K as d,gQ as V,C as W,u as $,aV as j,a8 as p,gR as v,c7 as h,d8 as G,gS as J,ci as K,gT as Q,gU as X,gV as Y,gW as Z,n as ee,cg as te,gX as ae,cd as se}from"../index-961d4ed1.js";import{v as ie}from"./balloon-551f6642.js";import{u as oe}from"./usePatronUser-1d9992e7.js";import{P as re}from"./profile-field-e9ecc432.js";import{P as ne}from"./profile-stats-5c7b65b0.js";const le=N(),ce=m=>{let{accountIds:t,limit:u=3}=m;const o=_(c=>A(t.slice(0,u).map(a=>le(c,a)).filter(a=>a)));return e(i,{className:"relative","aria-hidden":!0},void 0,o.map((c,a)=>e("div",{className:R("relative",{"-ml-3":a!==0}),style:{zIndex:u-a}},c.id,e(L,{className:"ring-1 ring-white dark:ring-primary-900",src:c.avatar,size:20}))))},de=N(),me=m=>{let{account:t}=m;const u=D(),o=_(s=>s.me),c=T(),a=_(s=>{var g;return((g=s.user_lists.familiar_followers.get(t.id))==null?void 0:g.items)||q()}),y=_(s=>a.slice(0,2).map(g=>de(s,g)));H.useEffect(()=>{o&&c.familiarFollowers&&u(O(t.id))},[t.id]);const b=()=>{u(W("FAMILIAR_FOLLOWERS",{accountId:t.id}))};if(a.size===0)return null;const w=y.map(s=>!!s&&e(U,{accountId:s.id,inline:!0},s.id,e(C,{className:"mention inline-block",to:`/@${s.acct}`},void 0,e(i,{space:1,alignItems:"center",grow:!0},void 0,e(l,{size:"sm",theme:"primary",truncate:!0,dangerouslySetInnerHTML:{__html:s.display_name_html}}),s.verified&&e(E,{}))))).toArray().filter(Boolean);return a.size>2&&w.push(e("span",{className:"cursor-pointer hover:underline",role:"presentation",onClick:b},"_",e(d,{id:"account.familiar_followers.more",defaultMessage:"{count, plural, one {# other} other {# others}} you follow",values:{count:a.size-y.size}}))),e(i,{space:2,alignItems:"center"},void 0,e(ce,{accountIds:a}),e(l,{theme:"muted",size:"sm",tag:"div"},void 0,e(d,{id:"account.familiar_followers",defaultMessage:"Followed by {accounts}",values:{accounts:e(V,{type:"conjunction",value:w})}})))},ue=m=>{try{const t=new URL(m);return["http:","https:"].includes(t.protocol)}catch{return!1}},M=ee({linkVerifiedOn:{id:"account.link_verified_on",defaultMessage:"Ownership of this link was checked on {date}"},account_locked:{id:"account.locked_info",defaultMessage:"This account privacy status is set to locked. The owner manually reviews who can follow them."},deactivated:{id:"account.deactivated",defaultMessage:"Deactivated"},bot:{id:"account.badges.bot",defaultMessage:"Bot"}}),ye=m=>{var I;let{account:t,username:u}=m;const o=$(),{displayFqn:c}=j(),{patronUser:a}=oe(t==null?void 0:t.url),y=_(r=>r.me),b=(t==null?void 0:t.id)===y,w=()=>t!=null&&t.admin?e(v,{slug:"admin",title:e(d,{id:"account_moderation_modal.roles.admin",defaultMessage:"Admin"})},"staff"):t!=null&&t.moderator?e(v,{slug:"moderator",title:e(d,{id:"account_moderation_modal.roles.moderator",defaultMessage:"Moderator"})},"staff"):null,s=()=>(t?te(t):[]).map(n=>e(v,{slug:n,title:ae(se(n))},n)),g=()=>{const r=s(),n=w(),x=(a==null?void 0:a.is_patron)===!0,f=[];return n&&f.push(n),x&&f.push(e(v,{slug:"patron",title:e(d,{id:"account.patron",defaultMessage:"Patron"})},"patron")),[...f,...r]},z=()=>{var F;const r=(F=t==null?void 0:t.pleroma)==null?void 0:F.birthday;if(!r)return null;const n=o.formatDate(r,{timeZone:"UTC",day:"numeric",month:"long",year:"numeric"}),x=new Date(r),f=new Date,S=x.getDate()===f.getDate()&&x.getMonth()===f.getMonth();return e(i,{alignItems:"center",space:.5},void 0,e(h,{src:ie,className:"h-4 w-4 text-gray-800 dark:text-gray-200"}),e(l,{size:"sm"},void 0,S?e(d,{id:"account.birthday_today",defaultMessage:"Birthday is today!"}):e(d,{id:"account.birthday",defaultMessage:"Born {date}",values:{date:n}})))};if(!t)return e("div",{className:"mt-6 min-w-0 flex-1 sm:px-2"},void 0,e(p,{space:2},void 0,e(p,{},void 0,e(i,{space:1,alignItems:"center"},void 0,e(l,{size:"sm",theme:"muted",direction:"ltr",truncate:!0},void 0,"@",u)))));const P=((I=t.pleroma)==null?void 0:I.deactivated)??!1?{__html:o.formatMessage(M.deactivated)}:{__html:t.display_name_html},B=o.formatDate(t.created_at,{month:"long",year:"numeric"}),k=g();return e("div",{className:"mt-6 min-w-0 flex-1 sm:px-2"},void 0,e(p,{space:2},void 0,e(p,{},void 0,e(i,{space:1,alignItems:"center"},void 0,e(l,{size:"lg",weight:"bold",dangerouslySetInnerHTML:P,truncate:!0}),t.bot&&e(v,{slug:"bot",title:o.formatMessage(M.bot)}),k.length>0&&e(i,{space:1,alignItems:"center"},void 0,k)),e(i,{alignItems:"center",space:.5},void 0,e(l,{size:"sm",theme:"muted",direction:"ltr",truncate:!0},void 0,"@",c?t.fqn:t.acct),t.locked&&e(h,{src:G,alt:o.formatMessage(M.account_locked),className:"h-4 w-4 text-gray-600"}))),e(ne,{account:t}),t.note.length>0&&e(J,{size:"sm",dangerouslySetInnerHTML:{__html:t.note_emojified},truncate:!0}),e("div",{className:"flex flex-col items-start gap-2 md:flex-row md:flex-wrap md:items-center"},void 0,K(t)?e(i,{alignItems:"center",space:.5},void 0,e(h,{src:Q,className:"h-4 w-4 text-gray-800 dark:text-gray-200"}),e(l,{size:"sm",title:o.formatDate(t.created_at,X)},void 0,e(d,{id:"account.member_since",defaultMessage:"Joined {date}",values:{date:B}}))):null,t.location?e(i,{alignItems:"center",space:.5},void 0,e(h,{src:Y,className:"h-4 w-4 text-gray-800 dark:text-gray-200"}),e(l,{size:"sm"},void 0,t.location)):null,t.website?e(i,{alignItems:"center",space:.5},void 0,e(h,{src:Z,className:"h-4 w-4 text-gray-800 dark:text-gray-200"}),e("div",{className:"max-w-[300px]"},void 0,e(l,{size:"sm",truncate:!0},void 0,ue(t.website)?e("a",{className:"text-primary-600 hover:underline dark:text-accent-blue",href:t.website,target:"_blank"},void 0,t.website):t.website))):null,z()),b?null:e(me,{account:t})),t.fields.length>0&&e(p,{space:2,className:"mt-4 xl:hidden"},void 0,t.fields.map((r,n)=>e(re,{field:r},n))))};export{ye as default};
