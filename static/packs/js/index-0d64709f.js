import{u as v,c as b,f as N,p as g,b4 as T,_ as e,bX as R,ae as E,b3 as F,H as k,n as _,ia as K,af as q,I as x,a1 as D,ib as H,ic as A,id as O,b9 as P,r as U,ie as $,G as p,K as m,ab as j,eb as w,cA as C,a2 as B,ig as z}from"../index-961d4ed1.js";import{S as G}from"./scrollable-list-74021d3b.js";import{v as L}from"./backspace-c284aa0a.js";import"./index-c72bc579.js";import"./load-more-1869fbc1.js";const V=_({add:{id:"aliases.account.add",defaultMessage:"Create alias"}}),X=t=>{var y;let{accountId:l,aliases:n}=t;const o=v(),c=b(),d=N(),u=g(I=>I.me),{account:s}=T(l),i=(y=s==null?void 0:s.pleroma)==null?void 0:y.ap_id,a=d.accountMoving?s==null?void 0:s.acct:i,r=a?n.includes(a):!1,S=()=>c(K(s));if(!s)return null;let M;return!r&&l!==u&&(M=e(E,{src:R,iconClassName:"h-5 w-5",title:o.formatMessage(V.add),onClick:S})),e(k,{space:1,alignItems:"center",justifyContent:"between",className:"p-2.5"},void 0,e("div",{className:"w-full"},void 0,e(F,{account:s,withRelationship:!1})),M)},f=_({search:{id:"aliases.search",defaultMessage:"Search your old account"},searchTitle:{id:"tabs_bar.search",defaultMessage:"Search"}}),Y=()=>{const t=b(),l=v(),n=g(i=>i.aliases.suggestions.value),o=i=>{t(H(i.target.value))},c=i=>{i.keyCode===13&&t(A(n))},d=()=>{t(A(n))},u=()=>{t(O())},s=n.length>0;return e("div",{className:"flex items-center gap-1"},void 0,e("label",{className:"relative grow"},void 0,e("span",{style:{display:"none"}},void 0,l.formatMessage(f.search)),e("input",{className:"block w-full rounded-full focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-800 dark:text-white dark:placeholder:text-gray-500 sm:text-sm",type:"text",value:n,onChange:o,onKeyUp:c,placeholder:l.formatMessage(f.search)}),e("div",{role:"button",tabIndex:s?0:-1,className:"search__icon",onClick:u},void 0,e(x,{src:L,"aria-label":l.formatMessage(f.search),className:D("svg-icon--backspace",{active:s})}))),e(q,{onClick:d},void 0,l.formatMessage(f.searchTitle)))},h=_({heading:{id:"column.aliases",defaultMessage:"Account aliases"},subheading_add_new:{id:"column.aliases.subheading_add_new",defaultMessage:"Add New Alias"},create_error:{id:"column.aliases.create_error",defaultMessage:"Error creating alias"},delete_error:{id:"column.aliases.delete_error",defaultMessage:"Error deleting alias"},subheading_aliases:{id:"column.aliases.subheading_aliases",defaultMessage:"Current aliases"},delete:{id:"column.aliases.delete",defaultMessage:"Delete"}}),ae=()=>{const t=v(),l=b(),n=N(),{account:o}=P(),c=g(a=>{var r;return n.accountMoving?[...a.aliases.aliases.items]:((r=o==null?void 0:o.pleroma)==null?void 0:r.also_known_as)??[]}),d=g(a=>a.aliases.suggestions.items),u=g(a=>a.aliases.suggestions.loaded);U.useEffect(()=>{l($)},[]);const s=a=>{l(z(a.currentTarget.dataset.value))},i=e(m,{id:"empty_column.aliases",defaultMessage:"You haven't created any account alias yet."});return e(B,{className:"aliases-settings-panel",label:t.formatMessage(h.heading)},void 0,e(w,{},void 0,e(C,{title:t.formatMessage(h.subheading_add_new)})),e(Y,{}),u&&d.size===0?e("div",{className:"aliases__accounts empty-column-indicator"},void 0,e(m,{id:"empty_column.aliases.suggestions",defaultMessage:"There are no account suggestions available for the provided term."})):e("div",{className:"aliases__accounts mb-4"},void 0,d.map(a=>e(X,{accountId:a,aliases:c},a))),e(w,{},void 0,e(C,{title:t.formatMessage(h.subheading_aliases)})),e("div",{className:"aliases-settings-panel"},void 0,e(G,{scrollKey:"aliases",emptyMessage:i},void 0,c.map((a,r)=>e(k,{alignItems:"center",justifyContent:"between",space:1,className:"p-2"},r,e("div",{},void 0,e(p,{tag:"span",theme:"muted"},void 0,e(m,{id:"aliases.account_label",defaultMessage:"Old account:"}))," ",e(p,{tag:"span"},void 0,a)),e("div",{className:"flex items-center",role:"button",tabIndex:0,onClick:s,"data-value":a,"aria-label":t.formatMessage(h.delete)},void 0,e(x,{className:"mr-1.5",src:j}),e(p,{weight:"bold",theme:"muted"},void 0,e(m,{id:"aliases.aliases_list_delete",defaultMessage:"Unlink alias"}))))))))};export{ae as default};
