import{eQ as r,bq as p,n as i,c as E,u as M,r as S,_ as e,bJ as L,af as R,bG as C,G as f,bF as F,a2 as h}from"../index-961d4ed1.js";import{F as P}from"./file-input-21883602.js";const U="IMPORT_FOLLOWS_REQUEST",w="IMPORT_FOLLOWS_SUCCESS",y="IMPORT_FOLLOWS_FAIL",k="IMPORT_BLOCKS_REQUEST",v="IMPORT_BLOCKS_SUCCESS",B="IMPORT_BLOCKS_FAIL",A="IMPORT_MUTES_REQUEST",Q="IMPORT_MUTES_SUCCESS",x="IMPORT_MUTES_FAIL",_=i({blocksSuccess:{id:"import_data.success.blocks",defaultMessage:"Blocks imported successfully"},followersSuccess:{id:"import_data.success.followers",defaultMessage:"Followers imported successfully"},mutesSuccess:{id:"import_data.success.mutes",defaultMessage:"Mutes imported successfully"}}),K=a=>(s,o)=>(s({type:U}),r(o).post("/api/pleroma/follow_import",a).then(t=>{p.success(_.followersSuccess),s({type:w,config:t.data})}).catch(t=>{s({type:y,error:t})})),W=a=>(s,o)=>(s({type:k}),r(o).post("/api/pleroma/blocks_import",a).then(t=>{p.success(_.blocksSuccess),s({type:v,config:t.data})}).catch(t=>{s({type:B,error:t})})),D=a=>(s,o)=>(s({type:A}),r(o).post("/api/pleroma/mutes_import",a).then(t=>{p.success(_.mutesSuccess),s({type:Q,config:t.data})}).catch(t=>{s({type:x,error:t})})),m=a=>{let{messages:s,action:o}=a;const t=E(),c=M(),[g,n]=S.useState(!1),[O,I]=S.useState(null),b=u=>{const l=new FormData;l.append("list",O),n(!0),t(o(l)).then(()=>{n(!1)}).catch(()=>{n(!1)}),u.preventDefault()},T=u=>{var d;const l=(d=u.target.files)==null?void 0:d.item(0);I(l)};return e(F,{onSubmit:b},void 0,e(f,{size:"xl",weight:"bold",tag:"label"},void 0,c.formatMessage(s.input_label)),e(C,{hintText:e(f,{theme:"muted"},void 0,c.formatMessage(s.input_hint))},void 0,e(P,{accept:".csv,text/csv",onChange:T,required:!0})),e(L,{},void 0,e(R,{type:"submit",theme:"primary",disabled:g},void 0,c.formatMessage(s.submit))))},V=i({heading:{id:"column.import_data",defaultMessage:"Import data"},submit:{id:"import_data.actions.import",defaultMessage:"Import"}}),G=i({input_label:{id:"import_data.follows_label",defaultMessage:"Follows"},input_hint:{id:"import_data.hints.follows",defaultMessage:"CSV file containing a list of followed accounts"},submit:{id:"import_data.actions.import_follows",defaultMessage:"Import follows"}}),q=i({input_label:{id:"import_data.blocks_label",defaultMessage:"Blocks"},input_hint:{id:"import_data.hints.blocks",defaultMessage:"CSV file containing a list of blocked accounts"},submit:{id:"import_data.actions.import_blocks",defaultMessage:"Import blocks"}}),z=i({input_label:{id:"import_data.mutes_label",defaultMessage:"Mutes"},input_hint:{id:"import_data.hints.mutes",defaultMessage:"CSV file containing a list of muted accounts"},submit:{id:"import_data.actions.import_mutes",defaultMessage:"Import mutes"}}),j=()=>{const a=M();return e(h,{label:a.formatMessage(V.heading)},void 0,e(m,{action:K,messages:G}),e(m,{action:W,messages:q}),e(m,{action:D,messages:z}))};export{j as default};
