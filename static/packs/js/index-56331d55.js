import{u as l,c as f,p as M,r,eT as h,_ as s,G as p,bJ as k,af as b,a2 as y,n as v,eU as _}from"../index-961d4ed1.js";import{S as B}from"./scrollable-list-74021d3b.js";import"./index-c72bc579.js";import"./load-more-1869fbc1.js";const t=v({heading:{id:"column.backups",defaultMessage:"Backups"},create:{id:"backups.actions.create",defaultMessage:"Create backup"},emptyMessage:{id:"backups.empty_message",defaultMessage:"No backups found. {action}"},emptyMessageAction:{id:"backups.empty_message.action",defaultMessage:"Create one now?"},pending:{id:"backups.pending",defaultMessage:"Pending"}}),w=()=>{const a=l(),n=f(),i=M(e=>e.backups.toList().sortBy(g=>g.inserted_at)),[o,d]=r.useState(!0),c=e=>{n(_()),e.preventDefault()};r.useEffect(()=>{n(h()).then(()=>{d(!1)}).catch(()=>{})},[]);const m=o&&i.count()===0,u=s("a",{href:"#",onClick:c},void 0,s(p,{tag:"span",theme:"primary",size:"sm",className:"hover:underline"},void 0,a.formatMessage(t.emptyMessageAction)));return s(y,{label:a.formatMessage(t.heading)},void 0,s(B,{isLoading:o,showLoading:m,scrollKey:"backups",emptyMessage:a.formatMessage(t.emptyMessage,{action:u})},void 0,i.map(e=>s("div",{className:"p-4"},e.id,e.processed?s("a",{href:e.url,target:"_blank"},void 0,e.inserted_at):s(p,{theme:"subtle"},void 0,a.formatMessage(t.pending),": ",e.inserted_at)))),s(k,{},void 0,s(b,{theme:"primary",disabled:o,onClick:c},void 0,a.formatMessage(t.create))))};export{w as default};
