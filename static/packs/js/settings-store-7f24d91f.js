import{u as y,c as w,d as C,p as E,r as c,_ as e,eb as A,cA as J,bF as N,bG as F,b_ as P,bJ as O,af as k,K as s,a2 as T,ak as x,al as i,fb as n,n as D,ac as L,ew as U,iy as I,iz as R,bq as G}from"../index-961d4ed1.js";const V=d=>{try{return JSON.parse(d),!0}catch{return!1}},h=D({heading:{id:"column.settings_store",defaultMessage:"Settings store"},advanced:{id:"developers.settings_store.advanced",defaultMessage:"Advanced settings"},hint:{id:"developers.settings_store.hint",defaultMessage:"It is possible to directly edit your user settings here. BE CAREFUL! Editing this section can break your account, and you will only be able to recover through the API."}}),B=()=>{const d=y(),g=w(),t=C(),f=E(o=>o.settings),[m,p]=c.useState(JSON.stringify(f,null,2)),[b,v]=c.useState(!0),[S,u]=c.useState(!1),_=o=>{let{target:l}=o;const r=l.value;p(r),v(V(r))},a=(o,l)=>{g(L(o,l,{showAlert:!0}))},M=o=>{const l=JSON.parse(m);u(!0),g(U({pleroma_settings_store:{[I]:l}})).then(r=>{g({type:R,settings:l}),u(!1)}).catch(r=>{G.showAlertForError(r),u(!1)})};return c.useEffect(()=>{p(JSON.stringify(f,null,2)),v(!0)},[f]),e(T,{label:d.formatMessage(h.heading),backHref:"/developers"},void 0,e(N,{onSubmit:M},void 0,e(F,{hintText:d.formatMessage(h.hint),errors:b?[]:["is invalid"]},void 0,e(P,{value:m,onChange:_,disabled:S,rows:12,isCodeEditor:!0})),e(O,{},void 0,e(k,{theme:"primary",type:"submit",disabled:!b||S},void 0,e(s,{id:"soapbox_config.save",defaultMessage:"Save"})))),e(A,{},void 0,e(J,{title:d.formatMessage(h.advanced)})),e(x,{},void 0,e(i,{label:e(s,{id:"preferences.fields.demo_label",defaultMessage:"Demo mode"}),hint:e(s,{id:"preferences.fields.demo_hint",defaultMessage:"Use the default Soapbox logo and color scheme. Useful for taking screenshots."})},void 0,e(n,{settings:t,settingPath:["demo"],onChange:a})),e(i,{label:e(s,{id:"preferences.notifications.advanced",defaultMessage:"Show all notification categories"})},void 0,e(n,{settings:t,settingPath:["notifications","quickFilter","advanced"],onChange:a})),e(i,{label:e(s,{id:"preferences.fields.unfollow_modal_label",defaultMessage:"Show confirmation dialog before unfollowing someone"})},void 0,e(n,{settings:t,settingPath:["unfollowModal"],onChange:a})),e(i,{label:e(s,{id:"preferences.fields.missing_description_modal_label",defaultMessage:"Show confirmation dialog before sending a post without media descriptions"})},void 0,e(n,{settings:t,settingPath:["missingDescriptionModal"],onChange:a})),e(i,{label:e(s,{id:"preferences.fields.reduce_motion_label",defaultMessage:"Reduce motion in animations"})},void 0,e(n,{settings:t,settingPath:["reduceMotion"],onChange:a})),e(i,{label:e(s,{id:"preferences.fields.underline_links_label",defaultMessage:"Always underline links in posts"})},void 0,e(n,{settings:t,settingPath:["underlineLinks"],onChange:a})),e(i,{label:e(s,{id:"preferences.fields.system_font_label",defaultMessage:"Use system's default font"})},void 0,e(n,{settings:t,settingPath:["systemFont"],onChange:a})),e(i,{label:e(s,{id:"preferences.fields.demetricator_label",defaultMessage:"Use Demetricator"}),hint:e(s,{id:"preferences.hints.demetricator",defaultMessage:"Decrease social media anxiety by hiding all numbers from the site."})},void 0,e(n,{settings:t,settingPath:["demetricator"],onChange:a}))))};export{B as default};
