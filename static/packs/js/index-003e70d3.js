import{u as S,c as _,f as L,R as t,eC as R,bq as g,_ as s,bF as x,bG as l,bH as u,eD as I,bJ as k,af as b,a2 as H,n as T}from"../index-961d4ed1.js";const a=T({updatePasswordSuccess:{id:"security.update_password.success",defaultMessage:"Password successfully updated."},updatePasswordFail:{id:"security.update_password.fail",defaultMessage:"Update password failed."},oldPasswordFieldLabel:{id:"security.fields.old_password.label",defaultMessage:"Current password"},newPasswordFieldLabel:{id:"security.fields.new_password.label",defaultMessage:"New password"},confirmationFieldLabel:{id:"security.fields.password_confirmation.label",defaultMessage:"New password (again)"},header:{id:"edit_password.header",defaultMessage:"Change Password"},submit:{id:"security.submit",defaultMessage:"Save changes"},cancel:{id:"common.cancel",defaultMessage:"Cancel"}}),P={currentPassword:"",newPassword:"",newPasswordConfirmation:""},A=()=>{const e=S(),c=_(),{passwordRequirements:w}=L(),[h,f]=t.useState(P),[M,m]=t.useState(!1),[C,y]=t.useState(!w),{currentPassword:d,newPassword:o,newPasswordConfirmation:r}=h,p=()=>f(P),n=t.useCallback(i=>{i.persist(),f(v=>({...v,[i.target.name]:i.target.value}))},[]),F=t.useCallback(()=>{m(!0),c(R(d,o,r)).then(()=>{p(),g.success(e.formatMessage(a.updatePasswordSuccess))}).finally(()=>{m(!1)}).catch(()=>{p(),g.error(e.formatMessage(a.updatePasswordFail))})},[d,o,r,c,e]);return s(H,{label:e.formatMessage(a.header),backHref:"/settings"},void 0,s(x,{onSubmit:F},void 0,s(l,{labelText:e.formatMessage(a.oldPasswordFieldLabel)},void 0,s(u,{type:"password",name:"currentPassword",onChange:n,value:d})),s(l,{labelText:e.formatMessage(a.newPasswordFieldLabel)},void 0,s(u,{type:"password",name:"newPassword",onChange:n,value:o}),w&&s(I,{password:o,onChange:y})),s(l,{labelText:e.formatMessage(a.confirmationFieldLabel)},void 0,s(u,{type:"password",name:"newPasswordConfirmation",onChange:n,value:r})),s(k,{},void 0,s(b,{to:"/settings",theme:"tertiary"},void 0,e.formatMessage(a.cancel)),s(b,{type:"submit",theme:"primary",disabled:M||!C},void 0,e.formatMessage(a.submit)))))};export{A as default};
