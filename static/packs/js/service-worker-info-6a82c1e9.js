import{_ as t,a1 as v,u as f,a8 as m,ak as w,al as d,H as p,G as M,c7 as b,cj as k,bJ as h,af as S,K as i,a2 as R,n as L,r as o,iC as x}from"../index-961d4ed1.js";const I=s=>{let{state:a="inactive",size:e="sm"}=s;return t("div",{className:v("rounded-full outline-double",{"w-1.5 h-1.5 shadow-sm":e==="sm","bg-green-500 outline-green-400":a==="active","bg-yellow-500 outline-yellow-400":a==="pending","bg-red-500 outline-red-400":a==="error","bg-neutral-500 outline-neutral-400":a==="inactive"})})},c=L({heading:{id:"column.developers.service_worker",defaultMessage:"Service Worker"},status:{id:"sw.status",defaultMessage:"Status"},url:{id:"sw.url",defaultMessage:"Script URL"}}),_=()=>{const[s,a]=o.useState(!0),[e,n]=o.useState(),r="serviceWorker"in navigator;return o.useEffect(()=>{r?navigator.serviceWorker.getRegistration().then(l=>{n(l),a(!1)}).catch(()=>a(!1)):a(!1)},[]),{isLoading:s,registration:e}},W=()=>{var u;const s=f(),{isLoading:a,registration:e}=_(),n=(u=e==null?void 0:e.active)==null?void 0:u.scriptURL,r=()=>e!=null&&e.waiting?"pending":e!=null&&e.active?"active":"inactive",l=()=>a?t(i,{id:"sw.state.loading",defaultMessage:"Loadingâ€¦"}):!a&&!e?t(i,{id:"sw.state.unavailable",defaultMessage:"Unavailable"}):e!=null&&e.waiting?t(i,{id:"sw.state.waiting",defaultMessage:"Waiting"}):e!=null&&e.active?t(i,{id:"sw.state.active",defaultMessage:"Active"}):t(i,{id:"sw.state.unknown",defaultMessage:"Unknown"}),g=async()=>{await x(),window.location.reload()};return t(R,{label:s.formatMessage(c.heading),backHref:"/developers"},void 0,t(m,{space:4},void 0,t(w,{},void 0,t(d,{label:s.formatMessage(c.status)},void 0,t(p,{alignItems:"center",space:2},void 0,t(I,{state:r()}),t(M,{size:"md",theme:"muted"},void 0,l()))),n&&t(d,{label:s.formatMessage(c.url)},void 0,t("a",{href:n,target:"_blank",className:"flex items-center space-x-1 truncate"},void 0,t("span",{className:"truncate"},void 0,n),t(b,{className:"h-4 w-4",src:k})))),t(h,{},void 0,t(S,{theme:"tertiary",type:"button",onClick:g},void 0,t(i,{id:"sw.restart",defaultMessage:"Restart"})))))};export{W as default};
